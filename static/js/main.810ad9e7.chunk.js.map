{"version":3,"sources":["assets/images/abstract_movie_poster.svg","utils/common.js","store/middlewares/utils.js","store/middlewares/moviedb-api.js","store/domains/common/common.types.js","store/domains/ui/ui.types.js","components/Notifier.js","store/domains/ui/ui.actions.js","components/utils/score-color.js","components/MovieCard.js","components/types/movie-type.js","components/placeholders/MovieCardPlaceholder.js","components/MovieList.js","components/MovieBrowser.js","store/domains/home/home.types.js","store/domains/user/user.types.js","store/domains/user/user.actions.js","store/utils.js","components/Home.js","store/domains/home/home.actions.js","components/SearchInput.js","components/SearchOutput.js","store/domains/search/search.types.js","store/domains/search/search.actions.js","components/Navbar.js","components/utils/debounce.js","store/domains/movie/movie.types.js","components/placeholders/MoviePagePlaceholder.js","components/utils/formatter.js","components/placeholders/EmptyBlock.js","components/Movie.js","store/domains/movie/movie.actions.js","components/Page404.js","store/domains/entities/entities.types.js","components/MovieCardFetch.js","components/Favorites.js","store/domains/entities/entities.actions.js","components/Sidebar.js","components/App.js","store/domains/common/common.actions.js","store/domains/common/common.reducer.js","store/domains/ui/ui.utils.js","store/domains/ui/ui.reducer.js","store/domains/user/user.reducer.js","store/domains/shared.js","store/domains/movie/movie.reducer.js","store/domains/home/home.reducer.js","store/domains/entities/entities.reducer.js","store/domains/search/search.reducer.js","store/store.js","index.js"],"names":["module","exports","generateId","globalId","dispatchAction","action","payload","next","Array","isArray","forEach","item","type","console","error","ActionTask","id","isCancelled","isDone","_handlers","cancel","done","Object","isFrozen","this","h","freeze","subscribe","event","handler","push","unsubscribe","filter","events","DONE","CANCEL","API_KEY","MOVIEDB_MIDDLEWARE","MiddlewareName","get","url","params","cancelToken","axios","baseURL","method","token","assign","api_key","language","timeout","GENRES_FETCH_REQUEST","GENRES_FETCH_SUCCESS","GENRES_FETCH_FAIL","ADD_ERROR","REMOVE_ERROR","displayed","withSnackbar","connect","state","errors","ui","dispatch","removeError","enqueueSnackbar","closeSnackbar","useEffect","includes","message","key","variant","Button","onClick","onExited","reason","splice","indexOf","VoteColors","UNKNOWN","BAD","OK","GOOD","EXCELLENT","getScoreColor","score","color","useStyles","makeStyles","theme","root","position","boxShadow","textDecoration","transform","opacity","display","posterContainer","overflow","posterImage","width","minHeight","borderRadius","backgroundColor","transition","posterOverlay","content","height","left","top","background","details","padding","movieName","fontWeight","margin","lineHeight","justifyContent","minWidth","breakpoints","down","fontSize","extraInfo","favoriteBtn","right","paddingLeft","spacing","paddingRight","favoriteBtnActive","MovieCard","title","genres","voteAverage","releaseDate","posterImageUrl","isFavorite","onFavorite","classes","vote","className","to","src","alt","size","e","stopPropagation","preventDefault","classNames","Typography","component","style","Date","getFullYear","length","slice","join","PropTypes","shape","oneOfType","string","number","isRequired","overview","arrayOf","instanceOf","backdropImageUrl","duration","budget","backdropImage","productionCountries","legend","actors","exact","name","character","gender","photo","crew","department","job","isExtendedDataLoaded","bool","MovieCardPlaceholder","Box","Skeleton","marginTop","cursor","transitionDelay","zIndex","MovieListItem","children","Grid","xs","sm","md","MovieList","container","justify","wrap","loader","alignItems","button","border","buttonProgress","palette","secondary","animationDuration","marginRight","MovieBrowser","movies","isFetching","isFetched","totalMovies","placeholdersAmount","onLoadMore","canLoadMore","Fragment","from","map","movie","index","once","placeholder","fullWidth","disabled","CircularProgress","disableShrink","thickness","Loop","POPULAR_MOVIES_FETCH_REQUEST","POPULAR_MOVIES_FETCH_SUCCESS","POPULAR_MOVIES_FETCH_FAIL","TOP_RATED_MOVIES_FETCH_REQUEST","TOP_RATED_MOVIES_FETCH_SUCCESS","TOP_RATED_MOVIES_FETCH_FAIL","UPCOMING_MOVIES_FETCH_REQUEST","UPCOMING_MOVIES_FETCH_SUCCESS","UPCOMING_MOVIES_FETCH_FAIL","USER_VISITED_MOVIE","USER_FAVORITE_TOGGLE","USER_CLEARED_VISITED_MOVIES","toggleFavorite","prepareImage","getMovie","entities","user","moviesById","genreIds","genresById","favoriteMovieIds","prepareMovie","raw","posterSize","backdropSize","extended","basicData","i","genre_ids","vote_average","release_date","poster_path","backdrop_path","popularity","extendedData","runtime","production_countries","c","tagline","credits","cast","profile_path","person","movieList","CustomTabs","withStyles","textAlign","indicator","Tabs","CustomTab","selected","Tab","categories","POPULAR","TOP_RATED","UPCOMING","MOVIES_PER_PAGE","isAppReady","common","popularMovies","home","topRatedMovies","upcomingMovies","fetchPopularMovies","page","meta","target","handlers","request","success","fail","fetchTopRatedMovies","fetchUpcomingMovies","props","useState","categoryName","setCategoryName","categoryMap","fetch","category","ids","switchTab","newCategory","Container","value","onChange","newValue","aria-label","label","flexWrap","icon","pointerEvents","input","transitions","create","SearchInput","onFocus","onBlur","InputBase","inputProps","maxHeight","overflowY","useItemStyles","itemImage","flexShrink","itemInfo","marginLeft","Item","poster","require","ListItem","Link","SearchOutput","fullHeight","List","aria-labelledby","SEARCH_REQUEST","SEARCH_SUCCESS","SEARCH_FAIL","SEARCH_CANCEL","SEARCH_QUERY_CHANGED","DUMMY_ACTION","searchTask","cancelSearch","menu","brand","overlay","CustomAppBar","AppBar","NavButton","search","location","router","pathname","searchMovies","query","trim","task","changeQuery","useTheme","onMenu","foundMovies","isMobile","useMediaQuery","showMobileSearch","setShowMobileSearch","showOutput","setShowOutput","output","searchDebounce","useCallback","func","wait","immediate","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","debounce","handleSearchInput","enabled","document","body","Toolbar","IconButton","edge","Menu","noWrap","direction","fill","MOVIE_PAGE_FETCH_REQUEST","MOVIE_PAGE_FETCH_SUCCESS","MOVIE_PAGE_FETCH_FAIL","SIMILAR_MOVIES_FETCH_REQUEST","SIMILAR_MOVIES_FETCH_SUCCESS","SIMILAR_MOVIES_FETCH_FAIL","RECOMMENDED_MOVIES_FETCH_REQUEST","RECOMMENDED_MOVIES_FETCH_SUCCESS","RECOMMENDED_MOVIES_FETCH_FAIL","skeleton","MoviePagePlaceholder","subtitle","text","rows","_","Math","random","Rating","iconEmpty","readOnly","Formatter","formatDate","date","getDay","getMonth","numberWithCommas","x","toString","replace","EmptyBlock","movieContainer","paddingTop","paddingBottom","backdrop","backgroundImage","objectFit","genreList","listStyle","genre","marginBottom","crewList","MovieInfo","loaded","handleClick","window","open","href","HomeRounded","MovieRecommendations","fetchSimilarMovies","fetchRecommendedMovies","recommended","recommendedMovies","similar","similarMovies","fetchSimilarMoviesCb","fetchRecommendedMoviesCb","amount","fetchMovie","append_to_response","fetchMoviePage","movieId","makeMovieVisited","urlId","useParams","scrollTo","flexDirection","Page404","autoPlay","controls","MOVIE_FETCH_REQUEST","MOVIE_FETCH_SUCCESS","MOVIE_FETCH_FAIL","MovieCardFetch","ready","movieIds","minheight","list","social","Sidebar","onClose","Drawer","anchor","Divider","ListItemIcon","ListItemText","primary","overflowWrap","Instagram","GitHub","LinkedIn","isLoading","isGenresLoaded","fetchGenres","showSidebar","setShowSidebar","autoHideDuration","CssBaseline","LinearProgress","path","Home","Movie","Favorites","initialState","universalMessage","prepareError","isAxiosError","response","status","visitedMovieIds","JSON","parse","localStorage","getItem","moviesFetchInitialState","moviesFetchReducer","prefix","total_results","results","undefined","initialSearchState","history","createBrowserHistory","rootReducer","combineReducers","err","setItem","stringify","Set","LOCATION_CHANGE","m","filterEmptyMovies","sort","a","b","preparedMovie","fetchDate","connectRouter","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","debug","async","keys","isDummy","log","msg","data","AxiosCancelToken","source","toLowerCase","MovieDbApiMiddleware","routerMiddleware","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.810ad9e7.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/abstract_movie_poster.bca418f3.svg\";","// A simple function for generation of unique IDs\nexport const generateId = (function () {\n    let globalId = 0\n    return function () {\n        return globalId++\n    }\n})()\n","import {generateId} from \"../../utils/common\"\n\n/**\n * This function allows us to dispatch action(s)\n * defined in different ways through the 'next' function.\n *\n * @param {string|function|array} action\n * @param {*} payload\n * @param {function} next\n * @returns {*}\n */\nexport function dispatchAction(action, payload = null, next) {\n    if (Array.isArray(action)) return action.forEach(item => dispatchAction(item, payload, next))\n\n    if (typeof action === 'string') {\n        return next({type: action, payload})\n    } else if (typeof action === \"function\") {\n        return action(next, payload)\n    } else {\n        console.error('\\'action\\' prop must be a string or function, but got: ' + typeof action)\n    }\n}\n\n/**\n * Allows us to manage action executing in a Middleware.\n *\n * @returns {{cancel(): void, , done(): void, isCancelled: boolean, subscribe(string, function): void, unsubscribe(string, function): void, id: string, _handlers: {cancel: [], done: []}, isDone: boolean}}\n * @constructor\n */\nexport function ActionTask() {\n    return {\n        id: \"TASK-\" + generateId(),\n        isCancelled: false,\n        isDone: false,\n        _handlers: {\n            cancel: [],\n            done: [],\n        },\n        cancel() {\n            if(Object.isFrozen(this)) return\n            this.isCancelled = true\n            this._handlers.cancel.forEach(h => h && h(this))\n        },\n        done() {\n            this.isDone = true\n            this._handlers.done.forEach(h => h && h(this))\n            Object.freeze(this)\n        },\n        subscribe(event, handler) {\n            this._handlers[event].push(handler)\n        },\n        unsubscribe(event, handler) {\n            this._handlers[event] = this._handlers[event].filter(h => h !== handler)\n        }\n    }\n}\n\nActionTask.events = {\n    DONE: 'done',\n    CANCEL: 'cancel'\n}\n","import axios from \"axios\"\nimport {dispatchAction, ActionTask} from \"./utils\"\nimport {CancelToken as AxiosCancelToken} from 'axios'\n\nconst API_KEY = \"4e44d9029b1270a757cddc766a1bcb63\"\n\nexport const MOVIEDB_MIDDLEWARE = 'MOVIEDB_MIDDLEWARE'\n\n// ACTION SCHEMA\n// -----------\n// const example = {\n//     type: \"SEARCH_MOVIES\",\n//     payload: {\n//         // for POST method\n//         someData: {},\n//     },\n//     meta: {\n//         target: MOVIEDB_MIDDLEWARE_TARGET,\n//         url: \"popular/movie\",\n//         method: \"GET\",\n//         params: {page: 2},\n//         handlers: {\n//             request: \"SOME_ACTION_REQUEST\",\n//             success: function (dispatch, {results: movies}) {\n//                 dispatch({type: \"SOME_ACTION_SUCCESS\", payload: {movies}})\n//             },\n//             fail: [\n//                 \"ADD_ERROR\",\n//                 \"SOME_ACTION_FAIL\",\n//                 function (dispatch, {error}) {\n//                     console.error('ERROR', error)\n//                 }\n//             ],\n//             cancel: \"SOME_ACTION_CANCEL\"\n//         }\n//     }\n// }\n\nconst MiddlewareName = 'MovieDB Api Middleware'\n\nexport function MovieDbApiMiddleware(debug = false) {\n    return store => next => async action => {\n        const {type, payload, meta} = action\n\n        if (!meta || meta.target !== MOVIEDB_MIDDLEWARE) return next(action)\n        if (!meta.handlers || !Object.keys(meta.handlers).length)\n            return console.error(`action must contain non empty 'meta' object with at least one handler`, action)\n\n        const {url, method, params, handlers} = meta\n        const task = meta.task || {isCancelled: false, isDone: false, isDummy: true}\n        const log = (msg, ...data) => console.log(\n            `%c[${MiddlewareName}]`, 'font-weight: bold',\n            `[${type}]${!task.isDummy ? ` [${task.id}]` : \"\"}: ${msg}`,\n            ...data\n        )\n\n        const cancelToken = AxiosCancelToken.source()\n        !task.isDummy && task.subscribe(ActionTask.events.CANCEL, function () {\n            cancelToken.cancel()\n            if (debug) log(`Action has been canceled`)\n            if (handlers.cancel) dispatchAction(handlers.cancel, null, store.dispatch)\n        })\n\n        if (!task.isCancelled && handlers.request) {\n            if (debug) log(`Request handling`, meta, payload)\n            dispatchAction(handlers.request, null, store.dispatch)\n        }\n\n        try {\n            let response\n            if (method.toLowerCase() === 'get') response = await get(url, params, cancelToken)\n            // else if () { ... }\n            else {\n                console.error('Unknown request method: ' + method, action)\n                return next(action)\n            }\n            if (handlers.success && !task.isCancelled) {\n                if (debug) log(`Success handling`)\n                dispatchAction(handlers.success, response.data, store.dispatch)\n            }\n        } catch (error) {\n            if (!task.isCancelled) {\n                if (debug) log(`Fail handling`, error)\n                if (handlers.fail) {\n                    dispatchAction(handlers.fail, {error}, store.dispatch)\n                } else {\n                    console.error(`Uncaught exception in ${MiddlewareName}: `, error)\n                }\n            }\n        } finally {\n            if (!task.isDummy && !task.isCancelled) task.done()\n            // TODO Should we make the task done if it is cancelled?\n            // if (task) task.done()\n        }\n    }\n\n}\n\n\nfunction get(url, params = {}, cancelToken) {\n    return axios({\n        baseURL: \"https://api.themoviedb.org/3/\",\n        url: url,\n        method: \"get\",\n        cancelToken: cancelToken.token,\n        params: Object.assign({},\n            {\n                api_key: API_KEY,\n                language: \"en-US\"\n            }, params\n        ),\n        timeout: 15 * 1000\n    })\n}\n","export const GENRES_FETCH_REQUEST = 'GENRES_FETCH_REQUEST'\nexport const GENRES_FETCH_SUCCESS = 'GENRES_FETCH_SUCCESS'\nexport const GENRES_FETCH_FAIL = 'GENRES_FETCH_FAIL'\n","export const ADD_ERROR = 'ADD_ERROR'\nexport const REMOVE_ERROR = 'REMOVE_ERROR'\n","import React, {useEffect} from 'react'\nimport {connect} from 'react-redux'\nimport {withSnackbar} from 'notistack'\nimport {removeError} from \"../store/domains/ui/ui.actions\"\nimport {Button} from \"@material-ui/core\"\n\nconst displayed = []\n\nfunction Notifier({enqueueSnackbar, closeSnackbar, removeError, errors = []}) {\n\n    useEffect(function () {\n        errors.forEach(error => {\n            if(displayed.includes(error.id)) return\n            enqueueSnackbar(error.message, {\n                key: error.id,\n                variant: \"error\",\n                action: key => (\n                    <Button onClick={() => closeSnackbar(key)}>OK</Button>\n                ),\n                onExited: (event, reason, key) => {\n                    displayed.splice(displayed.indexOf(error.id), 1)\n                    removeError(error)\n                }\n            })\n            displayed.push(error.id)\n        })\n    }, [errors, closeSnackbar, enqueueSnackbar, removeError])\n\n    return null\n}\n\nfunction mapStateToProps(state) {\n    return {\n        errors: state.ui.errors\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        removeError: id => dispatch(removeError(id))\n    }\n}\n\nexport default withSnackbar(connect(mapStateToProps, mapDispatchToProps)(Notifier));\n","import {ADD_ERROR, REMOVE_ERROR} from \"./ui.types\"\n\nexport function addError(error) {\n    return {type: ADD_ERROR, payload: {error}}\n}\n\nexport function removeError(error) {\n    return {type: REMOVE_ERROR, payload: {error}}\n}\n","export const VoteColors = {\n    UNKNOWN: '#999',\n    BAD: '#d63737',\n    OK: '#a7a7a7',\n    GOOD: '#5fbb67',\n    EXCELLENT: '#3bb33b'\n}\n\nexport function getScoreColor(score) {\n    let color = VoteColors.EXCELLENT\n    if(!score || score === 0) color = VoteColors.UNKNOWN\n    else if(score < 5.5) color = VoteColors.BAD\n    else if(score < 6.5) color = VoteColors.OK\n    else if(score < 7.25) color = VoteColors.GOOD\n\n    return color\n}\n","import {makeStyles} from \"@material-ui/core/styles\"\nimport React from \"react\"\nimport {Typography} from \"@material-ui/core\"\nimport {Link} from \"react-router-dom\"\nimport {getScoreColor} from \"./utils/score-color\"\nimport Button from \"@material-ui/core/Button\"\nimport FavoriteIcon from \"@material-ui/icons/Favorite\"\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder'\nimport classNames from 'classnames'\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: \"relative\",\n        boxShadow: \"none\",\n        textDecoration: 'none',\n        color: 'inherit',\n        \"&:hover\": {\n            \"& $posterImage\":{\n                transform: 'scale(1.075)'\n            },\n            \"& $posterOverlay\": {\n                opacity: 1\n            },\n            \"& $favoriteBtn\": {\n                display: 'flex'\n            }\n        },\n    },\n    posterContainer: {\n        position: 'relative',\n        overflow: 'hidden'\n    },\n    posterImage: {\n        position: 'relative',\n        display: 'block',\n        width: \"100%\",\n        minHeight: 250,\n        borderRadius: \"4px\",\n        backgroundColor: '#e8e8e8',\n        transition: 'all 0.15s ease-in-out'\n    },\n    posterOverlay: {\n        position: 'absolute',\n        content: '\"\"',\n        width: '100%',\n        height: '100%',\n        left: 0,\n        top: 0,\n        opacity: 0,\n        transition: 'all 0.15s ease-in-out',\n        background: 'linear-gradient(180deg, rgba(255,255,255,0) 41%, rgba(0,0,0,0.40) 100%)'\n    },\n    details: {\n        padding: '6px 4px'\n    },\n    movieName: {\n        fontWeight: \"normal\",\n        margin: \"4px 0 8px 0\",\n        lineHeight: '140%'\n    },\n    score: {\n        display: 'inline-flex',\n        position: 'absolute',\n        left: -5,\n        top: 8,\n        justifyContent: 'center',\n        fontWeight: 'bold',\n        padding: '2px 8px',\n        minWidth: 30,\n        color: 'white',\n        background: '#83d620',\n        borderRadius: 2,\n        [theme.breakpoints.down('xs')]: {\n            left: -8,\n            top: 12,\n            fontSize: '1.5rem',\n            minWidth: 40,\n        }\n    },\n    extraInfo: {\n        color: 'grey',\n        lineHeight: '150%'\n    },\n    favoriteBtn: {\n        display: 'none',\n        position: 'absolute',\n        right: 10,\n        top: 10,\n        minWidth: 16,\n        paddingLeft: theme.spacing(1),\n        paddingRight: theme.spacing(1),\n        color: 'white',\n        background: 'rgba(75, 87, 95, 0.9)',\n        \"&:hover\": {\n            background: 'rgba(245, 0, 87, 1)',\n        },\n        [theme.breakpoints.down('xs')]: {\n            display: 'flex',\n            padding: theme.spacing(2.5),\n            \"& svg\": {\n                height: theme.spacing(4),\n                width: theme.spacing(4),\n            }\n        }\n    },\n    favoriteBtnActive: {\n        display: 'flex',\n        color: 'white',\n        background: 'rgba(245, 0, 87, 1)',\n        \"&:hover\": {\n            background: 'rgba(245, 0, 87, 0.85)',\n        }\n    }\n}))\n\n\nfunction MovieCard({id, title, genres, voteAverage, releaseDate, posterImageUrl, isFavorite, onFavorite}) {\n    const classes = useStyles()\n\n    const color = getScoreColor(voteAverage)\n\n    const vote = voteAverage > 0 ? voteAverage : '-'\n\n    function handleFavorite(e){\n        e.stopPropagation()\n        e.preventDefault()\n        onFavorite && onFavorite(id)\n    }\n\n    return (\n        <Link className={classes.root} to={\"/movie/\"+id}>\n            <div className={classes.posterContainer}>\n                <img className={classes.posterImage} src={posterImageUrl} alt={title}/>\n                <div className={classes.posterOverlay} />\n                <Button\n                    variant=\"contained\"\n                    color=\"secondary\"\n                    size=\"medium\"\n                    onClick={handleFavorite}\n                    className={classNames([classes.favoriteBtn, {[classes.favoriteBtnActive]: isFavorite}])}>\n                    {isFavorite ? <FavoriteIcon /> : <FavoriteBorderIcon/>}\n                </Button>\n            </div>\n            <div className={classes.details}>\n                <Typography component=\"h4\" className={classes.movieName}>{title}</Typography>\n                <Typography variant=\"body1\" className={classes.score} style={{backgroundColor: color}}>\n                    {vote}\n                </Typography>\n                <Typography variant=\"body1\" className={classes.extraInfo}>\n                    {new Date(releaseDate).getFullYear()}  {genres.length ? genres.slice(0, 3).join(', '): '-'}\n                </Typography>\n            </div>\n        </Link>\n    )\n}\n\nexport default MovieCard\n","import PropTypes from \"prop-types\"\n\nexport const Movie = PropTypes.shape({\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    title: PropTypes.string.isRequired,\n    overview: PropTypes.string.isRequired,\n    genres: PropTypes.arrayOf(PropTypes.string).isRequired,\n    releaseDate: PropTypes.instanceOf(Date).isRequired,\n    voteAverage: PropTypes.number.isRequired,\n    posterImageUrl: PropTypes.string,\n    backdropImageUrl: PropTypes.string,\n\n    duration: PropTypes.number,\n    budget: PropTypes.number,\n    backdropImage: PropTypes.string,\n    posterImage: PropTypes.string,\n    productionCountries: PropTypes.arrayOf(PropTypes.string),\n    legend: PropTypes.string,\n    actors: PropTypes.arrayOf(PropTypes.exact({\n        id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n        name: PropTypes.string,\n        character: PropTypes.string,\n        gender: PropTypes.number,\n        photo: PropTypes.string\n    })),\n    crew: PropTypes.arrayOf(PropTypes.exact({\n        id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n        name: PropTypes.string,\n        department: PropTypes.string,\n        job: PropTypes.string,\n        gender: PropTypes.number,\n        photo: PropTypes.string\n    })),\n\n    isExtendedDataLoaded: PropTypes.bool\n})\n","import {Box} from \"@material-ui/core\"\nimport Skeleton from \"@material-ui/lab/Skeleton\"\nimport React from \"react\"\n\n\nexport default function MovieCardPlaceholder() {\n    return (\n        <Box>\n            <Skeleton variant=\"rect\" width={'100%'} height={270}/>\n            <Skeleton variant=\"rect\" style={{marginTop: 15}} width='100%'/>\n            <Skeleton variant=\"rect\" style={{marginTop: 8}} width='70%'/>\n        </Box>\n    )\n}\n","import React from 'react'\nimport Grid from \"@material-ui/core/Grid\"\nimport {makeStyles} from \"@material-ui/core\"\n\nconst useStyles = makeStyles(theme => ({\n    item: {\n        cursor: 'pointer',\n        padding: theme.spacing(1),\n        transition: 'all 0.1s cubic-bezier(0.43, 0.57, 0, 0.99)',\n        transitionDelay: '0.075s',\n        \"&:hover\": {\n            background: 'white',\n            zIndex: 2,\n        },\n        [theme.breakpoints.down('sm')]: {\n            padding: '15px 25px !important'\n        }\n    },\n}))\n\nexport function MovieList({children}) {\n    return (\n        <Grid container justify=\"flex-start\" wrap={\"wrap\"} spacing={2}>\n            {children}\n        </Grid>\n    )\n}\n\nexport function MovieListItem({children}) {\n    const classes = useStyles()\n\n    return (\n        <Grid className={classes.item} item xs={12} sm={4} md={2}>\n            {children}\n        </Grid>\n    )\n\n}\n\nexport default MovieList\n","import React from \"react\"\nimport LazyLoad from 'react-lazyload'\nimport PropTypes from 'prop-types'\nimport MovieCard from \"./MovieCard\"\nimport {makeStyles} from \"@material-ui/core/styles\"\nimport CircularProgress from \"@material-ui/core/CircularProgress\"\nimport {Movie} from \"./types/movie-type\"\nimport Button from \"@material-ui/core/Button\"\nimport {BorderColor, Loop} from \"@material-ui/icons\"\nimport MovieCardPlaceholder from \"./placeholders/MovieCardPlaceholder\"\nimport MovieList, {MovieListItem} from \"./MovieList\"\n\nconst useStyles = makeStyles(theme => ({\n    loader: {\n        height: 400,\n        width: 300,\n        margin: \"0 auto\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\"\n    },\n    button: {\n        marginTop: 20,\n        color: 'white',\n        border: '1px solid white'\n    },\n    buttonProgress: {\n        color: theme.palette.secondary,\n        animationDuration: '550ms',\n        marginRight: 6\n    },\n}))\n\nMovieBrowser.propTypes = {\n    movies: PropTypes.arrayOf(Movie),\n    isFetching: PropTypes.bool,\n    isFetched: PropTypes.bool,\n    totalMovies: PropTypes.number,\n    onLoadMore: PropTypes.func,\n    placeholdersAmount: PropTypes.number,\n}\n\nfunction MovieBrowser({movies = [], isFetching, isFetched, totalMovies, placeholdersAmount = 5, onLoadMore, onFavorite}) {\n    const classes = useStyles()\n\n    const canLoadMore = movies.length < totalMovies && !!onLoadMore\n\n    return (\n        <React.Fragment>\n            <MovieList>\n                {(isFetched ? movies : Array.from(new Array(placeholdersAmount))).map((movie, index) => (\n                    <MovieListItem key={movie ? movie.id : 'index:'+index}>\n                        {movie ?\n                            <LazyLoad height={400} once placeholder={<MovieCardPlaceholder />}>\n                                <MovieCard {...movie} onFavorite={onFavorite} />\n                            </LazyLoad> :\n                            <MovieCardPlaceholder/>}\n                    </MovieListItem>\n                ))}\n            </MovieList>\n            {canLoadMore &&\n            <Button className={classes.button} variant=\"outlined\" fullWidth size={\"large\"} disabled={isFetching} onClick={onLoadMore}>\n                {isFetching ?\n                    <CircularProgress\n                        className={classes.buttonProgress}\n                        variant=\"indeterminate\"\n                        disableShrink\n                        size={16}\n                        thickness={4}/> :\n                    <Loop className={classes.buttonProgress}/>}\n                {isFetching ? 'Loading...' : 'Load more'}\n            </Button>}\n        </React.Fragment>\n    )\n}\n\nexport default MovieBrowser\n","export const POPULAR_MOVIES_FETCH_REQUEST = 'POPULAR_MOVIES_FETCH_REQUEST'\nexport const POPULAR_MOVIES_FETCH_SUCCESS = 'POPULAR_MOVIES_FETCH_SUCCESS'\nexport const POPULAR_MOVIES_FETCH_FAIL = 'POPULAR_MOVIES_FETCH_FAIL'\n\nexport const TOP_RATED_MOVIES_FETCH_REQUEST = 'TOP_RATED_MOVIES_FETCH_REQUEST'\nexport const TOP_RATED_MOVIES_FETCH_SUCCESS = 'TOP_RATED_MOVIES_FETCH_SUCCESS'\nexport const TOP_RATED_MOVIES_FETCH_FAIL = 'TOP_RATED_MOVIES_FETCH_FAIL'\n\nexport const UPCOMING_MOVIES_FETCH_REQUEST = 'UPCOMING_MOVIES_FETCH_REQUEST'\nexport const UPCOMING_MOVIES_FETCH_SUCCESS = 'UPCOMING_MOVIES_FETCH_SUCCESS'\nexport const UPCOMING_MOVIES_FETCH_FAIL = 'UPCOMING_MOVIES_FETCH_FAIL'\n","export const USER_VISITED_MOVIE = 'USER_VISITED_MOVIE'\nexport const USER_FAVORITE_TOGGLE = 'USER_FAVORITE_TOGGLE'\n\nexport const USER_CLEARED_VISITED_MOVIES = 'USER_CLEANED_VISITED_MOVIES'\n","import {\n    USER_FAVORITE_TOGGLE,\n    USER_VISITED_MOVIE,\n    USER_CLEARED_VISITED_MOVIES\n} from \"./user.types\"\n\nexport function makeMovieVisited(id) {\n    return {type: USER_VISITED_MOVIE, payload: {id}}\n}\n\nexport function clearVisitedMovies(){\n    return {type: USER_CLEARED_VISITED_MOVIES}\n}\n\nexport function toggleFavorite(id) {\n    return {type: USER_FAVORITE_TOGGLE, payload: {id}}\n}\n","export function prepareImage(url, size = 'w500') {\n    // size = 'original'\n    if (!url) return null\n    return `https://image.tmdb.org/t/p/${size}${url}`\n}\n\nexport function getMovie(id, entities, user) {\n    const movie = entities.moviesById[id]\n    if(!movie) return null\n    return {\n        ...movie,\n        genres: movie.genreIds.map(id => entities.genresById[id]),\n        isFavorite: user.favoriteMovieIds.indexOf(id) !== -1\n    }\n}\n\nexport function prepareMovie({raw = {}, posterSize = 'w500', backdropSize = 'original', extended = false}) {\n    const basicData = {\n        id: raw.id,\n        title: raw.title,\n        overview: raw.overview,\n        genreIds: raw.genres ? raw.genres.map(i => i.id) : raw.genre_ids,\n        voteAverage: raw.vote_average,\n        releaseDate: new Date(raw.release_date),\n        posterImageUrl: prepareImage(raw.poster_path, posterSize),\n        backdropImageUrl: prepareImage(raw.backdrop_path, backdropSize),\n        popularity: raw.popularity\n    }\n    const extendedData = !extended ? null : {\n        duration: raw.runtime,\n        budget: raw.budget,\n        productionCountries: (raw.production_countries || []).map(c => c.name),\n        legend: raw.tagline,\n        actors: (raw.credits || []).cast.map(cast => ({\n            id: cast.id,\n            name: cast.name,\n            character: cast.character,\n            gender: cast.gender,\n            photo: prepareImage(cast.profile_path)\n        })),\n        crew: (raw.credits || []).crew.map(person => ({\n            id: person.id,\n            department: person.department,\n            job: person.job,\n            gender: person.gender,\n            name: person.name,\n            photo: prepareImage(person.profile_path)\n        })),\n\n        isExtendedDataLoaded: true\n    }\n    return Object.assign(basicData, extendedData)\n}\n","import React, {useEffect, useState} from 'react'\nimport Container from \"@material-ui/core/Container\"\nimport Tabs from \"@material-ui/core/Tabs\"\nimport Tab from \"@material-ui/core/Tab\"\nimport MovieBrowser from \"./MovieBrowser\"\nimport {makeStyles} from \"@material-ui/core/styles\"\nimport {connect} from \"react-redux\"\nimport {fetchPopularMovies, fetchTopRatedMovies, fetchUpcomingMovies} from \"../store/domains/home/home.actions\"\nimport {toggleFavorite} from \"../store/domains/user/user.actions\"\nimport {getMovie} from \"../store/utils\"\nimport withStyles from \"@material-ui/core/styles/withStyles\"\n\nconst useStyles = makeStyles(theme => ({\n    movieList: {\n        margin: '20px 0px'\n    },\n    container: {\n        margin: '12px auto'\n    },\n}))\n\nconst CustomTabs = withStyles({\n    root: {\n        textAlign: 'center',\n        borderRadius: 4,\n        // border: '1px solid black',\n        overflow: 'hidden',\n        background: '#66AD47',\n    },\n    indicator: {\n        background: 'none'\n    }\n})(Tabs)\n\nconst CustomTab = withStyles({\n    root: {\n        minWidth: 110,\n    },\n    selected: {\n        background: '#F4BE2C',\n        color: 'white'\n    }\n})(Tab)\n\nconst categories = {\n    POPULAR: 'popular',\n    TOP_RATED: 'top-rated',\n    UPCOMING: 'upcoming'\n}\n\nconst MOVIES_PER_PAGE = 20\n\nfunction Home(props) {\n    const {\n        isAppReady,\n\n        popularMovies,\n        topRatedMovies,\n        upcomingMovies,\n\n        entities,\n        user,\n\n        toggleFavorite,\n        fetchPopularMovies,\n        fetchTopRatedMovies,\n        fetchUpcomingMovies,\n    } = props\n\n    const [categoryName, setCategoryName] = useState(categories.POPULAR)\n    const categoryMap = {\n        [categories.POPULAR]: {\n            movies: popularMovies,\n            fetch: fetchPopularMovies\n        },\n        [categories.TOP_RATED]: {\n            movies: topRatedMovies,\n            fetch: fetchTopRatedMovies\n        },\n        [categories.UPCOMING]: {\n            movies: upcomingMovies,\n            fetch: fetchUpcomingMovies,\n        }\n    }\n    const category = categoryMap[categoryName]\n    const movies = isAppReady ? category.movies.ids.map(id => getMovie(id, entities, user)) : []\n\n    function loadMore() {\n        if(category.movies.totalMovies === category.movies.ids.length) return\n        category.fetch(category.movies.ids.length / MOVIES_PER_PAGE + 1)\n    }\n\n    function switchTab(name){\n        setCategoryName(name)\n        const newCategory = categoryMap[name]\n        if(!newCategory.movies.ids.length) newCategory.fetch()\n    }\n\n    useEffect(function () {\n        switchTab(categories.POPULAR)\n        // TODO Should I memorize the function and constants?\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    const classes = useStyles()\n\n    return (\n        <Container className={classes.container}>\n                <CustomTabs\n                    value={categoryName}\n                    onChange={(e, newValue) => switchTab(newValue)}\n                    aria-label=\"disabled tabs example\"\n                >\n                    <CustomTab label=\"Popular\" value={categories.POPULAR}/>\n                    <CustomTab label=\"Top rated\" value={categories.TOP_RATED}/>\n                    <CustomTab label=\"Upcoming\" value={categories.UPCOMING}/>\n                </CustomTabs>\n                <main className={classes.movieList}>\n                    <MovieBrowser\n                        onLoadMore={loadMore}\n                        placeholdersAmount={10}\n                        movies={movies}\n                        onFavorite={toggleFavorite}\n                        isFetched={category.movies.isFetched}\n                        isFetching={!isAppReady || category.movies.isFetching}\n                        totalMovies={category.movies.totalMovies}\n                    />\n                </main>\n        </Container>\n    )\n}\n\nfunction mapStateToProps(state) {\n    return {\n        isAppReady: state.common.isAppReady,\n\n        popularMovies: state.home.popularMovies,\n        topRatedMovies: state.home.topRatedMovies,\n        upcomingMovies: state.home.upcomingMovies,\n\n        entities: state.entities,\n        user: state.user,\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        fetchPopularMovies: (page) => dispatch(fetchPopularMovies(page)),\n        fetchTopRatedMovies: (page) => dispatch(fetchTopRatedMovies(page)),\n        fetchUpcomingMovies: (page) => dispatch(fetchUpcomingMovies(page)),\n        toggleFavorite: (id) => dispatch(toggleFavorite(id))\n    }\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home)\n","import {MOVIEDB_MIDDLEWARE} from \"../../middlewares/moviedb-api\"\nimport {ADD_ERROR} from \"../ui/ui.types\"\nimport {\n    UPCOMING_MOVIES_FETCH_FAIL,\n    UPCOMING_MOVIES_FETCH_REQUEST,\n    UPCOMING_MOVIES_FETCH_SUCCESS,\n    POPULAR_MOVIES_FETCH_FAIL,\n    POPULAR_MOVIES_FETCH_REQUEST,\n    POPULAR_MOVIES_FETCH_SUCCESS,\n    TOP_RATED_MOVIES_FETCH_FAIL,\n    TOP_RATED_MOVIES_FETCH_REQUEST,\n    TOP_RATED_MOVIES_FETCH_SUCCESS\n} from \"./home.types\"\n\nexport function fetchPopularMovies(page = 1) {\n    return {\n        type: \"FETCH_POPULAR_MOVIES\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            params: {page},\n            url: \"movie/popular\",\n            handlers: {\n                request: POPULAR_MOVIES_FETCH_REQUEST,\n                success: POPULAR_MOVIES_FETCH_SUCCESS,\n                fail: [ADD_ERROR, POPULAR_MOVIES_FETCH_FAIL]\n            }\n        }\n    }\n}\n\nexport function fetchTopRatedMovies(page = 1) {\n    return {\n        type: \"FETCH_TOP_RATED_MOVIES\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            params: {page},\n            url: \"movie/top_rated\",\n            handlers: {\n                request: TOP_RATED_MOVIES_FETCH_REQUEST,\n                success: TOP_RATED_MOVIES_FETCH_SUCCESS,\n                fail: [ADD_ERROR, TOP_RATED_MOVIES_FETCH_FAIL]\n            }\n        }\n    }\n}\n\nexport function fetchUpcomingMovies(page = 1) {\n    return {\n        type: \"FETCH_UPCOMING_MOVIES\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            params: {page},\n            url: \"movie/upcoming\",\n            handlers: {\n                request: UPCOMING_MOVIES_FETCH_REQUEST,\n                success: UPCOMING_MOVIES_FETCH_SUCCESS,\n                fail: [ADD_ERROR, UPCOMING_MOVIES_FETCH_FAIL]\n            }\n        }\n    }\n}\n","import React from 'react'\nimport InputBase from \"@material-ui/core/InputBase\"\nimport SearchIcon from '@material-ui/icons/Search'\nimport {makeStyles} from \"@material-ui/core\"\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: 'relative',\n        display: 'flex',\n        flexWrap: 'nowrap',\n    },\n    icon: {\n        position: 'absolute',\n        left: 0,\n        top: 0,\n        display: 'flex',\n        height: '100%',\n        width: theme.spacing(7),\n        pointerEvents: 'none',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    input: {\n        color: 'inherit',\n        paddingLeft: theme.spacing(7),\n        padding: 4,\n        transition: theme.transitions.create('background'),\n        background: 'rgba(0, 0, 0, 0.05)',\n        borderRadius: theme.shape.borderRadius,\n        width: '100%',\n        \"&:focus, &:hover\": {\n            background: 'rgba(0, 0, 0, 0.065)',\n        },\n        '&:focus': {\n            minWidth: 400\n        }\n    }\n}))\n\nfunction SearchInput({value, placeholder, onChange, onFocus, onBlur, style}) {\n    const classes = useStyles()\n\n    return (\n        <div className={classes.root} style={style}>\n            <div className={classes.icon}>\n                <SearchIcon />\n            </div>\n            <InputBase className={classes.input}\n                       value={value}\n                       type=\"search\"\n                       onChange={onChange}\n                       onFocus={onFocus}\n                       onBlur={onBlur}\n                       placeholder={placeholder}\n                       inputProps={{ 'aria-label': 'search' }} />\n        </div>\n    )\n}\n\nexport default SearchInput\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Movie} from \"./types/movie-type\"\nimport List from \"@material-ui/core/List\"\nimport ListItem from \"@material-ui/core/ListItem\"\nimport {makeStyles, Typography} from \"@material-ui/core\"\nimport {getScoreColor} from \"./utils/score-color\"\nimport {Link} from \"react-router-dom\"\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: 'fixed',\n        maxHeight: 400,\n        width: '100%',\n        overflowY: 'auto',\n        background: '#CAD5E2',\n        boxShadow: '0px 10px 20px rgba(0, 0, 0, 0.22)',\n        zIndex: 2\n    }\n}))\n\nSearchOutput.propTypes = {\n    movies: PropTypes.arrayOf(Movie)\n}\n\nfunction SearchOutput({movies = [], fullHeight = false}) {\n    const classes = useStyles()\n\n    return (\n        <React.Fragment>\n            <List className={classes.root} aria-labelledby=\"nested-list-subheader\">\n                {movies.map(movie => <Item key={movie.id} movie={movie} />)}\n            </List>\n        </React.Fragment>\n    )\n}\n\nconst useItemStyles = makeStyles(theme => ({\n    item: {\n        height: 60,\n        padding: theme.spacing(1),\n        paddingLeft: 20,\n\n        [theme.breakpoints.down('sm')]: {\n            height: 90,\n        }\n    },\n    itemImage: {\n        height: '100%',\n        borderRadius: 4,\n        overflow: 'hidden',\n        flexShrink: 0\n    },\n    itemInfo: {\n         marginLeft: theme.spacing(2),\n         marginRight: theme.spacing(2)\n    },\n    vote: {\n        display: 'flex',\n        alignItems: 'center',\n        marginLeft: 'auto',\n        marginRight: theme.spacing(1),\n        padding: theme.spacing(1),\n        height: '100%',\n        fontWeight: 'bold',\n        fontSize: '12pt',\n    }\n}))\n\nfunction Item({movie}){\n    const classes = useItemStyles()\n\n    const poster = movie.posterImageUrl || require('../assets/images/abstract_movie_poster.svg')\n\n    const color = getScoreColor(movie.voteAverage)\n\n    return (\n        <ListItem button component={Link} className={classes.item} to={\"/movie/\" + movie.id}>\n                <img className={classes.itemImage} src={poster} alt={movie.title}/>\n                <div className={classes.itemInfo}>\n                    <Typography variant=\"body1\">\n                        <span style={{fontWeight: 500}}>{movie.title}</span>\n                        <span style={{color: 'grey'}}>{movie.releaseDate > 0 ? ` (${movie.releaseDate.getFullYear()})` : ''}</span>\n                    </Typography>\n                    <Typography variant=\"body2\" component=\"span\" style={{color: 'grey'}}>\n                        {!!movie.genres.length ? movie.genres.join(', ') : ''}\n                    </Typography>\n                </div>\n                <Typography\n                    variant=\"body2\"\n                    className={classes.vote}\n                    style={{color: color}}\n                >\n                    {movie.voteAverage > 0 ? movie.voteAverage : ''}\n                </Typography>\n        </ListItem>\n    )\n}\n\nexport default SearchOutput\n","export const SEARCH_REQUEST = 'SEARCH_REQUEST'\nexport const SEARCH_SUCCESS = 'SEARCH_SUCCESS'\nexport const SEARCH_FAIL = 'SEARCH_FAIL'\nexport const SEARCH_CANCEL = 'SEARCH_CANCEL'\nexport const SEARCH_QUERY_CHANGED = 'SEARCH_QUERY_CHANGED'\n","import {ActionTask} from \"../../middlewares/utils\"\nimport {MOVIEDB_MIDDLEWARE} from \"../../middlewares/moviedb-api\"\nimport {SEARCH_CANCEL, SEARCH_FAIL, SEARCH_QUERY_CHANGED, SEARCH_REQUEST, SEARCH_SUCCESS} from \"./search.types\"\nimport {ADD_ERROR} from \"../ui/ui.types\"\n\nconst DUMMY_ACTION = {type: \"DO_NOTHING\"}\n\nlet searchTask = {isDone: true, isCancelled: false}\n\nexport function searchMovies(query, page = 1) {\n    if (!query || !query.trim().length) {\n        if(!searchTask.isDone && !searchTask.isCancelled) {\n            // Cancel task and return DUMMY_ACTION\n            // because the cancel handler has already declared \n            // what to dispatch after cancel() call\n            searchTask.cancel()\n            return DUMMY_ACTION\n        }\n        return cancelSearch()\n    }\n    if (!searchTask.isDone && !searchTask.isCancelled) cancelSearch()\n\n    searchTask = ActionTask()\n\n    return {\n        type: \"MOVIES_SEARCH\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            url: 'search/movie',\n            method: \"GET\",\n            params: {query, page},\n            task: searchTask,\n            handlers: {\n                request: SEARCH_REQUEST,\n                success: SEARCH_SUCCESS,\n                fail: [ADD_ERROR, SEARCH_FAIL],\n                cancel: SEARCH_CANCEL\n            },\n        }\n    }\n}\n\nexport function cancelSearch(){\n    if (!searchTask.isDone && !searchTask.isCancelled) {\n        // Return DUMMY_ACTION because\n        // search action will automatically dispatch cancel handler\n        searchTask.cancel()\n        return DUMMY_ACTION\n    }\n    return {type: SEARCH_CANCEL}\n}\n\nexport function changeQuery(value){\n    return {type: SEARCH_QUERY_CHANGED, payload: {query: value}}\n}\n","import React, {useCallback, useEffect, useState} from \"react\"\nimport AppBar from \"@material-ui/core/AppBar\"\nimport Toolbar from \"@material-ui/core/Toolbar\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport {Menu as MenuIcon} from \"@material-ui/icons\"\nimport Typography from \"@material-ui/core/Typography\"\nimport {Link} from \"react-router-dom\"\nimport {makeStyles, withStyles} from \"@material-ui/core/styles\"\nimport SearchInput from \"./SearchInput\"\nimport SearchOutput from \"./SearchOutput\"\nimport {cancelSearch, changeQuery, searchMovies} from \"../store/domains/search/search.actions\"\nimport {connect} from \"react-redux\"\nimport {debounce} from \"./utils/debounce\"\nimport FavoriteIcon from '@material-ui/icons/Favorite'\nimport VisibilityIcon from '@material-ui/icons/Visibility'\nimport Button from \"@material-ui/core/Button\"\nimport SearchIcon from '@material-ui/icons/Search'\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\nimport {useTheme} from '@material-ui/core/styles'\n\nconst useStyles = makeStyles(theme => ({\n    menu: {\n        marginRight: 10\n    },\n    brand: {\n        textDecoration: 'none',\n        color: 'inherit'\n    },\n    overlay: {\n        position: 'fixed',\n        width: '100%',\n        height: '100vh',\n        top: 0,\n        left: 0,\n        background: 'rgba(9, 9, 10, 0.6)',\n        zIndex: 1\n    },\n}))\n\nconst CustomAppBar = withStyles({\n    root: {\n        color: '#333',\n        background: 'white',\n        boxShadow: '0 1px 2px rgba(0, 0, 0, 0.1)'\n    }\n})(AppBar)\n\nconst NavButton = withStyles(theme => ({\n    root: {\n        backgroundColor: 'rgba(0, 0, 0, 0.05)',\n        marginRight: theme.spacing(1),\n        marginLeft: theme.spacing(1),\n        paddingLeft: theme.spacing(2),\n        paddingRight: theme.spacing(2),\n\n        \"&:hover\": {\n            backgroundColor: 'rgba(0, 0, 0, 0.08)',\n        }\n    }\n}))(Button)\n\nfunction Navbar(props) {\n    const theme = useTheme();\n    const {onMenu} = props\n    const {query, foundMovies, entities, location} = props\n    const {changeQuery, searchMovies, cancelSearch} = props\n    const classes = useStyles()\n\n    const isMobile = useMediaQuery(theme.breakpoints.down('sm'))\n    const [showMobileSearch, setShowMobileSearch] = useState(false)\n    const [showOutput, setShowOutput] = useState(false)\n\n    // add 'genres' property\n    const output = foundMovies.map(movie => ({...movie, genres: movie.genreIds.map(id => entities.genresById[id])}))\n\n    const searchDebounce = useCallback(debounce(function (value) {\n        searchMovies(value)\n        setShowOutput(true)\n    }, 600), [searchMovies])\n\n    function handleSearchInput(e) {\n        const value = e.target.value\n        changeQuery(value)\n        cancelSearch()\n        if (value.length && value.trim().length < 2) return\n        searchDebounce(value)\n    }\n\n    // disable/enable scrolling of body element\n    useEffect(function () {\n        bodyScrolling(!(showOutput && foundMovies.length))\n    }, [showOutput, foundMovies])\n\n    // hide output when location (page) has changed\n    useEffect(function () {\n        setShowOutput(false)\n    }, [location])\n\n    const mobileNavBar = () => (\n        <React.Fragment>\n            {showOutput && <div className={classes.overlay} onClick={e => setShowOutput(false)}/>}\n            <CustomAppBar position=\"sticky\">\n                <Toolbar>\n                    <IconButton onClick={onMenu} edge=\"start\" color=\"inherit\" aria-label=\"menu\" className={classes.menu}>\n                        <MenuIcon/>\n                    </IconButton>\n                    <Typography variant=\"h6\" noWrap>\n                        <Link to=\"/\" className={classes.brand}> Movie App  </Link>\n                    </Typography>\n                    <IconButton onClick={e => setShowMobileSearch(!showMobileSearch)} style={{marginLeft: 'auto'}}>\n                        <SearchIcon />\n                    </IconButton>\n                </Toolbar>\n                {showMobileSearch && <div style={{margin: '5px 15px 10px 15px'}}>\n                    <SearchInput\n                        value={query}\n                        style={{width: '100%', height: 50}}\n                        placeholder={\"Search...\"}\n                        onChange={handleSearchInput}\n                        onBlur={e => !query && setShowOutput(false) }\n                        onFocus={() => setShowOutput(true)}\n                    />\n                </div>}\n                \n            </CustomAppBar>\n            {(!!output.length && showOutput) && <SearchOutput movies={output}/>}\n        </React.Fragment>\n    )\n\n    const desktopNavbar = () => (\n        <React.Fragment>\n            {showOutput && <div className={classes.overlay} onClick={e => setShowOutput(false)}/>}\n            <CustomAppBar position=\"sticky\"\n            style ={{\n                color: \"#1FAA59\",\n                direction: 'flex',\n                backgroundColor: \"#242B2E\"\n            }}\n            >\n                <Toolbar>\n                <SearchInput\n                        className=\"inputID\"\n                        value={query}\n                        placeholder={\"Search...\"}\n                        style={{marginLeft: 30, width: 250,}}\n                        onChange={handleSearchInput}\n                        onBlur={e => !query && setShowOutput(false) }\n                        onFocus={() => setShowOutput(true)}\n                    />\n                    <Typography variant=\"h6\" noWrap\n                    style={{marginLeft: \"25vw\"}}>\n                        <Link to=\"/\" className={classes.brand}>Movie App </Link>\n                    </Typography>\n                    \n                    <div style={{marginLeft: 'auto'}}>\n                        <NavButton component={Link} to=\"/favorites\" color=\"inherit\">\n                            <FavoriteIcon style={{marginRight: 10, fill: \"#f50057\"}}/>\n                            Favorites\n                        </NavButton>\n                    </div>\n                </Toolbar>\n            </CustomAppBar>\n            {(!!output.length && showOutput) && <SearchOutput movies={output}/>}\n        </React.Fragment>\n    )\n\n    return (\n        isMobile ? mobileNavBar() : desktopNavbar()\n    )\n}\n\nfunction bodyScrolling(enabled) {\n    document.body.style.overflow = enabled ? '' : 'hidden'\n}\n\nfunction mapStateToProps(state) {\n    return {\n        ...state.search,\n        entities: state.entities,\n        location: state.router.location.pathname\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        searchMovies: (query) => dispatch(searchMovies(query)),\n        cancelSearch: () => dispatch(cancelSearch()),\n        changeQuery: (value) => dispatch(changeQuery(value))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Navbar)\n","export function debounce(func, wait, immediate = false) {\n    let timeout\n    return function () {\n        let context = this, args = arguments\n        let later = function () {\n            timeout = null\n            if (!immediate) func.apply(context, args)\n        }\n        let callNow = immediate && !timeout\n        clearTimeout(timeout)\n        timeout = setTimeout(later, wait)\n        if (callNow) func.apply(context, args)\n    }\n}\n","export const MOVIE_PAGE_FETCH_REQUEST = 'MOVIE_PAGE_FETCH_REQUEST'\nexport const MOVIE_PAGE_FETCH_SUCCESS = 'MOVIE_PAGE_FETCH_SUCCESS'\nexport const MOVIE_PAGE_FETCH_FAIL = 'MOVIE_PAGE_FETCH_FAIL'\n\nexport const SIMILAR_MOVIES_FETCH_REQUEST = 'SIMILAR_MOVIES_FETCH_REQUEST'\nexport const SIMILAR_MOVIES_FETCH_SUCCESS = 'SIMILAR_MOVIES_FETCH_SUCCESS'\nexport const SIMILAR_MOVIES_FETCH_FAIL = 'SIMILAR_MOVIES_FETCH_FAIL'\n\nexport const RECOMMENDED_MOVIES_FETCH_REQUEST = 'RECOMMENDED_MOVIES_FETCH_REQUEST'\nexport const RECOMMENDED_MOVIES_FETCH_SUCCESS = 'RECOMMENDED_MOVIES_FETCH_SUCCESS'\nexport const RECOMMENDED_MOVIES_FETCH_FAIL = 'RECOMMENDED_MOVIES_FETCH_FAIL'\n","import Skeleton from \"@material-ui/lab/Skeleton\"\nimport Grid from \"@material-ui/core/Grid\"\nimport Rating from \"@material-ui/lab/Rating\"\nimport React from \"react\"\nimport {makeStyles} from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles(theme => ({\n    skeleton: {\n        background: 'rgb(181, 181, 181)',\n    },\n    icon: {\n        color: 'rgb(181, 181, 181)'\n    }\n}))\n\nfunction MoviePagePlaceholder() {\n    const classes = useStyles()\n\n    const subtitle = (width) => <Skeleton variant=\"text\" width={width} height={28} className={classes.skeleton}/>\n    const text = (rows) => Array.from(new Array(rows)).map((_, i) => (\n        <Skeleton variant=\"text\" key={i} width={100 - Math.random() * 8 + '%'} height={20} className={classes.skeleton}/>\n    ))\n\n    return (\n        <Grid container spacing={7}>\n            <Grid item md={3}>\n                <Skeleton variant=\"rect\" height={356} style={{borderRadius: 10}} width={'100%'} className={classes.skeleton}/>\n            </Grid>\n            <Grid item md={8} style={{color: 'white'}}>\n                <Skeleton variant=\"text\" width={100} height={20} className={classes.skeleton}/>\n                <Skeleton variant=\"text\" width={300} height={34} className={classes.skeleton}/>\n                <div>\n                    <Rating value={4} classes={{iconEmpty: classes.icon}} readOnly/>\n                </div>\n                {subtitle(50)}\n                {text(4)}\n                <br/>\n                {subtitle(70)}\n                {text(3)}\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default MoviePagePlaceholder\n","export const Formatter = {\n    formatDate(date) {\n        const monthNames = [\n            \"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\n            \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\n        ]\n        return `${date.getDay()} ${monthNames[date.getMonth()]}, ${date.getFullYear()}`\n    },\n    numberWithCommas(x) {\n        return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n    }\n}\n","import React from 'react'\nimport Typography from \"@material-ui/core/Typography\"\nimport {makeStyles} from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles(theme => ({\n    container: {\n        \"height\": 300,\n        \"background\": \"#f3f3f3\",\n        \"borderRadius\": 4,\n        \"display\": \"flex\",\n        \"justifyContent\": \"center\",\n        \"alignItems\": \"center\",\n        \"color\": \"rgba(0, 0, 0, 0.25)\"\n    }\n}))\n\n\nfunction EmptyBlock({text}) {\n    const classes = useStyles()\n    return (\n        <div className={classes.container}>\n            <Typography variant=\"body1\">{text}</Typography>\n        </div>\n    )\n}\n\nexport default EmptyBlock\n","import React, {useCallback, useEffect} from 'react'\nimport {useParams} from \"react-router\"\nimport {connect} from \"react-redux\"\nimport LazyLoad from 'react-lazyload'\nimport Container from \"@material-ui/core/Container\"\nimport Grid from \"@material-ui/core/Grid\"\nimport Typography from \"@material-ui/core/Typography\"\nimport Rating from \"@material-ui/lab/Rating\"\nimport {makeStyles} from \"@material-ui/core/styles\"\nimport {fetchMoviePage, fetchRecommendedMovies, fetchSimilarMovies} from \"../store/domains/movie/movie.actions\"\nimport {getMovie} from \"../store/utils\"\nimport MovieBrowser from \"./MovieBrowser\"\nimport MoviePagePlaceholder from \"./placeholders/MoviePagePlaceholder\"\nimport FavoriteIcon from \"@material-ui/icons/Favorite\"\nimport Button from \"@material-ui/core/Button\"\nimport {makeMovieVisited, toggleFavorite} from \"../store/domains/user/user.actions\"\nimport {Formatter} from \"./utils/formatter\"\nimport EmptyBlock from \"./placeholders/EmptyBlock\"\nimport TheatersIcon from '@material-ui/icons/Theaters';\nimport { BorderAllOutlined, HomeRounded } from '@material-ui/icons'\nimport { borders } from '@material-ui/system';\nimport { Link } from 'react-router-dom'\nfunction Movie(props) {\n    const {id: urlId} = useParams()\n    const {\n        isAppReady,\n        movie,\n        fetchMovie,\n        toggleFavorite,\n        makeMovieVisited,\n    } = props\n\n    useEffect(function () {\n        fetchMovie(urlId)\n        window.scrollTo({top: 0, left: 0})\n    }, [urlId, fetchMovie])\n\n    useEffect(function () {\n        if(movie.isFetched) makeMovieVisited(movie.id)\n    }, [movie.id, makeMovieVisited])\n\n    return (\n        <React.Fragment>\n            <MovieInfo movie={movie} loaded={isAppReady && movie.isFetched} onFavorite={toggleFavorite}/>\n            <MovieRecommendations {...props} id={urlId}/>\n        </React.Fragment>\n    )\n}\n\nconst useStyles = makeStyles(theme => ({\n    movieContainer: {\n        paddingTop: 50,\n        paddingBottom: 50,\n    },\n    backdrop: {\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: -1,\n        '&:after': {\n            position: 'absolute',\n            content: \"''\",\n            display: 'block',\n            top: 0,\n            left: 0,\n            width: '100%',\n            height: '100%',\n            background: 'rgba(30, 47, 60, 0.75)',\n            backgroundImage: 'radial-gradient(circle at 20% 50%, rgba(30, 47, 60, 0.75) 0%, rgba(48, 65, 78, 0.75) 100%)'\n        }\n    },\n    backdropImage: {\n        display: 'block',\n        width: '100%',\n        height: '100%',\n        objectFit: 'cover',\n    },\n    poster: {\n        width: '100%',\n        borderRadius: 10,\n        boxShadow: '0px 3px 20px #0000003b',\n    },\n    releaseDate: {\n        fontSize: '11pt',\n        color: '#dadde2'\n    },\n    vote: {\n        display: 'flex',\n        alignItems: 'center',\n        fontSize: '12pt'\n    },\n    genreList: {\n        listStyle: 'none',\n        padding: 0,\n        display: 'flex',\n        flexWrap: 'wrap',\n    },\n    genre: {\n        cursor: 'pointer',\n        padding: '1px 6px',\n        marginRight: 10,\n        border: '1px solid white',\n        borderRadius: 4,\n        fontSize: '10pt'\n    },\n    subtitle: {\n        marginBottom: 8,\n        fontSize: '13pt'\n    },\n    crewList: {\n        listStyle: 'none',\n        padding: 0,\n    },\n}))\n\nfunction MovieInfo({movie, loaded, onFavorite}) {\n    const {\n        id,\n        title,\n        genres,\n        duration,\n        budget,\n        backdropImageUrl,\n        posterImageUrl,\n        releaseDate,\n        productionCountries,\n        voteAverage,\n        legend,\n        overview,\n        crew,\n        actors,\n\n        isFavorite\n    } = movie\n\n    const classes = useStyles()\n\n    const handleClick = () => {\n        window.open('/Page404')\n    }\n    \n    \n\n    const poster = posterImageUrl || require('../assets/images/abstract_movie_poster.svg')\n    // TODO Add backdrop fallback\n    // const backdrop = backdropImageUrl\n\n    // TODO Sort actors and crew by their popularity/importance\n\n    return (\n        <main style={{position: 'relative'}}>\n            <div className={classes.backdrop}>\n                <img className={classes.backdropImage} src={backdropImageUrl} alt={\"Backdrop of \" + title}/>\n            </div>\n            <Container className={classes.movieContainer}>\n                {loaded ?\n                    <Grid container spacing={7}>\n                        <Grid item md={3}>\n                            <img className={classes.poster} src={poster} alt={\"Poster of \" + title}/>\n                        </Grid>\n                        <Grid item md={9} style={{color: 'white'}}>\n                            <div className={classes.releaseDate}>\n                                {Formatter.formatDate(releaseDate)} ({productionCountries.join(', ')})\n                            </div>\n                            <Typography variant={\"h4\"} style={{fontWeight: 'bold'}} component={\"h1\"}>\n                                {title}              \n                              \n                            </Typography>\n                               \n                            <ul className={classes.genreList}>\n                                {genres.map(genre => (\n                                    <li className={classes.genre} key={genre}>{genre}</li>\n                                ))}\n                            </ul>\n                            <div className={classes.vote}>\n                                <Rating value={voteAverage / 2} readOnly/>\n                                <span style={{margin: '2px 0px 0 6px'}}>{voteAverage}/10</span>\n                                <Button\n                                    style={{marginLeft: 16}}\n                                    onClick={() => onFavorite(id)}\n                                    variant={isFavorite ? \"contained\" : \"outlined\"}\n                                    color=\"secondary\"\n                                    aria-label=\"like\"\n                                >\n                                    <FavoriteIcon/> Add to Favourites\n                                </Button>\n                                <Button\n                                 style={{marginLeft: 25}}\n                                 onClick={handleClick}\n                                 variant={handleClick ? \"contained\" : \"outlined\"}\n                                 color=\"primary\"\n                                 aria-label=\"like\"\n                                >\n                                   <TheatersIcon /> Show Preview\n                                </Button>\n                                <Button  href=\"/\"\n                                style={{\n                                    color: \"#1FAA59\",\n                                    marginLeft : \"25px\",\n                                    \n                                    \n                                }}\n                                 \n                                 variant={handleClick ? \"contained\" : \"outlined\"}\n                                 >\n                                   <HomeRounded /> Home\n                                </Button>\n                            </div>\n                            <div style={{marginTop: 10}}>\n                                <Typography component={\"div\"} style={{marginRight: 15}}>\n                                    <b>Duration:</b> {duration} min.\n                                </Typography>\n                                <Typography component={\"div\"}>\n                                    <b>Budget:</b> {budget ? '$' + Formatter.numberWithCommas(budget) : '-'}\n                                </Typography>\n                            </div>\n                            {legend && <React.Fragment>\n                                <h3 className={classes.subtitle}>Legend</h3>\n                                <Typography variant={\"body1\"}>{legend}</Typography>\n                            </React.Fragment>}\n                            {overview && <React.Fragment>\n                                <h3 className={classes.subtitle}>Overview</h3>\n                                <Typography variant={\"body1\"}>{overview}</Typography>\n                            </React.Fragment>}\n                            {crew.length && <React.Fragment>\n                                <h3 className={classes.subtitle}>Crew</h3>\n                                <Grid container spacing={3} component=\"ul\" className={classes.crewList}>\n                                    {crew.slice(0, 4).map((person, i) => (\n                                        <Grid item md={3} sm={6} component=\"li\" key={i} style={{paddingRight: 16}}>\n                                            <Typography variant={\"body2\"}\n                                                        style={{fontWeight: 'bold'}}>{person.name}</Typography>\n                                            <Typography\n                                                variant={\"body2\"}>{person.department}, {person.job}</Typography>\n                                        </Grid>\n                                    ))}\n                                </Grid>\n                            </React.Fragment>}\n                        </Grid>\n                    </Grid> :\n                    <MoviePagePlaceholder/>}\n            </Container>\n        </main>\n    )\n}\n\nfunction MovieRecommendations(props) {\n    const {\n        id,\n\n        movie,\n        entities,\n        user,\n\n        toggleFavorite,\n        fetchSimilarMovies,\n        fetchRecommendedMovies,\n    } = props\n\n    const {recommendedMovies: recommended, similarMovies: similar} = movie\n\n    const MOVIES_PER_LIST = 6\n\n    const recommendedMovies = recommended.ids.slice(0, MOVIES_PER_LIST).map(id => getMovie(id, entities, user))\n    const similarMovies = similar.ids.slice(0, MOVIES_PER_LIST).map(id => getMovie(id, entities, user))\n\n    const fetchSimilarMoviesCb = useCallback(() => fetchSimilarMovies(id), [id, fetchSimilarMovies])\n    const fetchRecommendedMoviesCb = useCallback(() => fetchRecommendedMovies(id), [id, fetchRecommendedMovies])\n\n    return (\n        <Container>\n            <section>\n                <h2>Recommended movies</h2>\n                <LazyLoad height={400}>\n                    <MovieList\n                        isFetching={recommended.isFetching}\n                        isFetched={recommended.isFetched}\n                        movies={recommendedMovies}\n                        amount={MOVIES_PER_LIST}\n                        fetch={fetchRecommendedMoviesCb}\n                        onFavorite={toggleFavorite}\n                    />\n                </LazyLoad>\n            </section>\n            <section>\n                <h2>Similar movies</h2>\n                <LazyLoad height={400}>\n                    <MovieList\n                        isFetching={similar.isFetching}\n                        isFetched={similar.isFetched}\n                        movies={similarMovies}\n                        amount={MOVIES_PER_LIST}\n                        fetch={fetchSimilarMoviesCb}\n                        onFavorite={toggleFavorite}\n                    />\n                </LazyLoad>\n            </section>\n        </Container>\n    )\n}\n\n\nfunction MovieList({isFetching, isFetched, movies = [], amount, fetch, onFavorite}) {\n\n    useEffect(function () {\n        fetch()\n    }, [fetch])\n\n    if (isFetched && !movies.length) return (\n        <EmptyBlock text={\"There is no data for this movie\"} />\n    )\n\n    return (\n        <MovieBrowser placeholdersAmount={amount}\n                      isFetching={isFetching}\n                      isFetched={isFetched}\n                      movies={movies}\n                      onFavorite={onFavorite}\n        />\n    )\n}\n\nfunction mapStateToProps(state) {\n    let movie = state.movie.isFetched ? getMovie(state.movie.id, state.entities, state.user) : {}\n    movie = {...movie, ...state.movie}\n    return {\n        isAppReady: state.common.isAppReady,\n        movie: movie,\n        entities: state.entities,\n        user: state.user\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        fetchMovie: (id) => dispatch(fetchMoviePage(id)),\n        fetchSimilarMovies: (id) => dispatch(fetchSimilarMovies(id)),\n        fetchRecommendedMovies: (id) => dispatch(fetchRecommendedMovies(id)),\n        toggleFavorite: (id) => dispatch(toggleFavorite(id)),\n        makeMovieVisited: (id) => dispatch(makeMovieVisited(id))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Movie)\n","import {MOVIEDB_MIDDLEWARE} from \"../../middlewares/moviedb-api\"\nimport {\n    MOVIE_PAGE_FETCH_FAIL,\n    MOVIE_PAGE_FETCH_REQUEST,\n    MOVIE_PAGE_FETCH_SUCCESS,\n    RECOMMENDED_MOVIES_FETCH_FAIL,\n    RECOMMENDED_MOVIES_FETCH_REQUEST,\n    RECOMMENDED_MOVIES_FETCH_SUCCESS,\n    SIMILAR_MOVIES_FETCH_FAIL,\n    SIMILAR_MOVIES_FETCH_REQUEST,\n    SIMILAR_MOVIES_FETCH_SUCCESS\n} from \"./movie.types\"\nimport {ADD_ERROR} from \"../ui/ui.types\"\n\nexport function fetchMoviePage(id) {\n    return {\n        type: \"FETCH_MOVIE_PAGE\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            url: \"/movie/\" + id,\n            params: {\n                append_to_response: 'credits'\n            },\n            handlers: {\n                request: MOVIE_PAGE_FETCH_REQUEST,\n                success: MOVIE_PAGE_FETCH_SUCCESS,\n                fail: [ADD_ERROR, MOVIE_PAGE_FETCH_FAIL]\n            }\n        }\n    }\n}\n\nexport function fetchSimilarMovies(movieId, page = 1) {\n    return {\n        type: \"FETCH_SIMILAR_MOVIES\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            url: `movie/${movieId}/similar`,\n            params: {page},\n            handlers: {\n                request: SIMILAR_MOVIES_FETCH_REQUEST,\n                success: SIMILAR_MOVIES_FETCH_SUCCESS,\n                fail: [ADD_ERROR, SIMILAR_MOVIES_FETCH_FAIL]\n            }\n        }\n    }\n}\n\nexport function fetchRecommendedMovies(movieId, page = 1) {\n    return {\n        type: \"FETCH_RECOMMENDED_MOVIES\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            url: `movie/${movieId}/recommendations`,\n            params: {page},\n            handlers: {\n                request: RECOMMENDED_MOVIES_FETCH_REQUEST,\n                success: RECOMMENDED_MOVIES_FETCH_SUCCESS,\n                fail: [ADD_ERROR, RECOMMENDED_MOVIES_FETCH_FAIL]\n            }\n        }\n    }\n}\n","import React from 'react'\nimport Container from \"@material-ui/core/Container\"\nimport {makeStyles} from \"@material-ui/core\"\nimport {Link} from \"react-router-dom\"\nimport ReactHlsPlayer from 'react-hls-player';\nconst useStyles = makeStyles(theme => ({\n    container: {\n        minHeight: \"80vh\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        flexDirection: \"column\",\n        alignItems: \"center\"\n    },\n    subtitle: {\n        fontSize: '14pt'\n    },\n    action: {\n        textDecoration: 'none',\n        color: '#0037ff',\n        margin: 6,\n        \"&:hover\": {\n            textDecoration: 'underline'\n        }\n    }\n}))\n\nfunction Page404(props) {\n    const classes = useStyles()\n\n    return (\n        <Container className={classes.container}>\n           \n            <ReactHlsPlayer\n    src=\"https://content.jwplatform.com/manifests/yp34SRmf.m3u8\"\n    autoPlay={true}\n    controls={true}\n    width=\"100%\"\n    height=\"auto\"\n  >\n\n  </ReactHlsPlayer>\n                 \n            <div className={classes.subtitle}>\n                Go back to \n                <Link className={classes.action} to=\"/\">Home page.</Link>\n            </div>\n        </Container>\n    )\n}\n\nexport default Page404\n","export const MOVIE_FETCH_REQUEST = 'MOVIE_FETCH_REQUEST'\nexport const MOVIE_FETCH_SUCCESS = 'MOVIE_FETCH_SUCCESS'\nexport const MOVIE_FETCH_FAIL = 'MOVIE_FETCH_FAIL'\n","import React, {useEffect} from \"react\"\nimport MovieCard from \"./MovieCard\"\nimport MovieCardPlaceholder from \"./placeholders/MovieCardPlaceholder\"\n\n\nfunction MovieCardFetch({id, movie, ready, fetch, onFavorite}) {\n\n    useEffect(function () {\n        if (!movie && ready) fetch(id)\n    }, [id, movie, fetch, ready])\n\n    return (\n        !!movie ? <MovieCard {...movie} onFavorite={onFavorite}/> : <MovieCardPlaceholder/>\n    )\n}\n\nexport default MovieCardFetch\n","import React from 'react'\nimport LazyLoad from 'react-lazyload'\nimport {connect} from \"react-redux\"\nimport Typography from \"@material-ui/core/Typography\"\nimport Container from \"@material-ui/core/Container\"\nimport EmptyBlock from \"./placeholders/EmptyBlock\"\nimport {fetchMovie} from \"../store/domains/entities/entities.actions\"\nimport {getMovie} from \"../store/utils\"\nimport {toggleFavorite} from \"../store/domains/user/user.actions\"\nimport MovieCardFetch from \"./MovieCardFetch\"\nimport MovieList, {MovieListItem} from \"./MovieList\"\n\nfunction Favorites({isAppReady, movieIds, entities, user, fetchMovie, toggleFavorite}) {\n\n    return (\n        <Container style={{margin: '20px auto', height: '100vh'}}>\n            <Typography component=\"h2\" variant=\"h4\" style={{margin: '40px 0', color: '#fff'}}>\n                Favorite movies\n            </Typography>\n            {!movieIds.length && (\n                <EmptyBlock text=\"You haven't marked favorite movies yet\"/>\n            )}\n            {!!movieIds.length && (\n                <MovieList>\n                    {movieIds.map(id => {\n                        const movie = getMovie(id, entities, user)\n                        return (\n                            <LazyLoad minheight={400} key={id} once>\n                                <MovieListItem>\n                                    <MovieCardFetch\n                                        id={id}\n                                        movie={movie}\n                                        fetch={fetchMovie}\n                                        ready={isAppReady}\n                                        onFavorite={toggleFavorite}\n                                    />\n                                </MovieListItem>\n                            </LazyLoad>\n                        )\n                    })}\n                </MovieList>\n            )}\n        </Container>\n    )\n}\n\nfunction mapStateToProps(state) {\n    return {\n        isAppReady: state.common.isAppReady,\n        movieIds: state.user.favoriteMovieIds,\n        entities: state.entities,\n        user: state.user\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        fetchMovie: (id) => dispatch(fetchMovie(id)),\n        toggleFavorite: (id) => dispatch(toggleFavorite(id))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Favorites)\n","import {MOVIEDB_MIDDLEWARE} from \"../../middlewares/moviedb-api\"\nimport {MOVIE_FETCH_FAIL, MOVIE_FETCH_REQUEST, MOVIE_FETCH_SUCCESS} from \"./entities.types\"\nimport {ADD_ERROR} from \"../ui/ui.types\"\n\nexport function fetchMovie(id) {\n    return {\n        type: \"FETCH_MOVIE\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            url: \"/movie/\" + id,\n            params: {\n                append_to_response: 'credits'\n            },\n            handlers: {\n                request: MOVIE_FETCH_REQUEST,\n                success: MOVIE_FETCH_SUCCESS,\n                fail: [ADD_ERROR, MOVIE_FETCH_FAIL]\n            }\n        }\n    }\n}\n","import React from 'react'\nimport Drawer from \"@material-ui/core/Drawer\"\nimport List from \"@material-ui/core/List\"\nimport ListItem from \"@material-ui/core/ListItem\"\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\"\nimport ListItemText from \"@material-ui/core/ListItemText\"\nimport FavoriteIcon from '@material-ui/icons/Favorite'\nimport VisibilityIcon from '@material-ui/icons/Visibility'\nimport Divider from \"@material-ui/core/Divider\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport {GitHub, Instagram, LinkedIn, Menu as MenuIcon, TimelineSharp} from \"@material-ui/icons\"\nimport Typography from \"@material-ui/core/Typography\"\nimport {Link} from \"react-router-dom\"\nimport {makeStyles} from \"@material-ui/core\"\nimport FavoriteBorder from '@material-ui/icons/FavoriteBorder'\n\nconst useStyles = makeStyles(theme => ({\n    list: {\n        width: 250,\n    },\n    brand: {\n        textDecoration: 'none',\n        color: 'inherit'\n    },\n    text :{\n       textAlign: 'center',\n       marginTop: '500px'\n\n    },\n    social: {\n       marginRight: '15px',\n       textAlign: 'center'\n    }\n}))\n\nfunction Sidebar({open, onClose}) {\n    const classes = useStyles()\n\n    return (\n        <Drawer anchor=\"left\" variant=\"temporary\" open={open} onClose={onClose}>\n            <List className={classes.list}>\n                <ListItem button key=\"favorite\">\n                    <IconButton onClick={onClose} edge=\"start\" color=\"inherit\" aria-label=\"menu\">\n                        <MenuIcon/>\n                    </IconButton>\n                    <Typography variant=\"h6\" noWrap>\n                        <Link className={classes.brand} to=\"/\">Movie App </Link>\n                    </Typography>\n                </ListItem>\n                <Divider />\n                <ListItem component={Link} to=\"/favorites\" button key=\"favorite\">\n                    <ListItemIcon><FavoriteIcon/></ListItemIcon>\n                    <ListItemText primary=\"Favorites\" />\n                </ListItem>\n                <ListItem>\n                <Typography variant=\"h6\" overflowWrap>\n                        <ListItemText className={classes.text} to=\"/\">This App is Made by Zafar Abbas</ListItemText>\n                    </Typography>\n                </ListItem>\n                <ListItem className={classes.social}>\n                <Link to={{ pathname: \"https://www.instagram.com/az.zzzafar/\" }} target=\"_blank\">\n                    <ListItemIcon>\n                        <Instagram />\n                    </ListItemIcon>\n                 </Link>  \n                 \n                 <Link to={{ pathname: \"https://github.com/bts-zafar\" }} target=\"_blank\">\n                    <ListItemIcon>\n                        <GitHub />\n                    </ListItemIcon>\n                 </Link>  \n                 <Link to={{ pathname: \"https://github.com/bts-zafar\" }} target=\"_blank\">\n                    <ListItemIcon>\n                        <LinkedIn />\n                    </ListItemIcon>\n                 </Link>   \n                </ListItem>\n            </List>\n        </Drawer>\n    )\n}\n\nexport default Sidebar\n","import React, {useEffect, useState} from 'react'\nimport {connect} from \"react-redux\"\nimport {Switch, Route} from \"react-router-dom\"\nimport CssBaseline from \"@material-ui/core/CssBaseline\"\nimport LinearProgress from \"@material-ui/core/LinearProgress\"\nimport {fetchGenres} from \"../store/domains/common/common.actions\"\nimport {SnackbarProvider} from \"notistack\"\nimport Notifier from \"./Notifier\"\nimport Home from \"./Home\"\nimport Navbar from \"./Navbar\"\nimport Movie from \"./Movie\"\nimport Page404 from \"./Page404\"\nimport Favorites from \"./Favorites\"\nimport Sidebar from \"./Sidebar\"\n\n\n\nfunction App(props) {\n    const {isLoading, location, fetchGenres} = props\n    const [showSidebar, setShowSidebar] = useState(false)\n\n    useEffect(function () {\n        fetchGenres()\n    }, [fetchGenres])\n\n    useEffect(function () {\n        setShowSidebar(false)\n    }, [location])\n\n    return (\n        <SnackbarProvider autoHideDuration={30 * 1000}>\n            <CssBaseline/>\n            <Notifier/>\n            {isLoading && <LinearProgress style={{position: 'fixed', top: 0, width: '100%', zIndex: 9999}}/>}\n            <Navbar onMenu={() => setShowSidebar(!showSidebar)}/>\n            <Sidebar open={showSidebar} onClose={() => setShowSidebar(!showSidebar)} />\n            <Switch>\n                <Route exact path=\"/\" component={Home}/>\n                <Route path=\"/movie/:id\" component={Movie}/>\n                <Route path=\"/favorites\" component={Favorites}/>\n                <Route component={Page404}/>\n            </Switch>\n        </SnackbarProvider>\n    );\n}\n\nfunction mapStateToProps(state) {\n    return {\n        isLoading: !state.common.isGenresLoaded || state.search.isFetching || state.movie.isFetching,\n        errors: state.ui.errors,\n        location: state.router.location.pathname\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        fetchGenres: () => dispatch(fetchGenres()),\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","import {MOVIEDB_MIDDLEWARE} from \"../../middlewares/moviedb-api\"\nimport {GENRES_FETCH_FAIL, GENRES_FETCH_REQUEST, GENRES_FETCH_SUCCESS} from \"./common.types\"\nimport {ADD_ERROR} from \"../ui/ui.types\"\n\nexport function fetchGenres() {\n    return {\n        type: \"FETCH_GENRES\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            url: \"genre/movie/list\",\n            params: null,\n            handlers: {\n                request: GENRES_FETCH_REQUEST,\n                success: GENRES_FETCH_SUCCESS,\n                fail: [ADD_ERROR, GENRES_FETCH_FAIL]\n            }\n        }\n    }\n}\n","import {GENRES_FETCH_FAIL, GENRES_FETCH_REQUEST, GENRES_FETCH_SUCCESS} from \"./common.types\"\n\nconst initialState = {\n    // main state\n    isAppReady: false,\n    // for better control\n    isGenresLoaded: false,\n}\n\nexport function commonReducer(state = initialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case GENRES_FETCH_REQUEST:\n        case GENRES_FETCH_FAIL:\n            return {...state, isGenresLoaded: false, isAppReady: false}\n        case GENRES_FETCH_SUCCESS:\n            return {...state, isGenresLoaded: true, isAppReady: true}\n        default:\n            return state\n    }\n}\n","const universalMessage = \"Something went wrong\"\n\nexport function prepareError(error) {\n    if(typeof error === 'string') return error\n    else if(error.isAxiosError) {\n        if(!error.response) {\n            return error.message || universalMessage\n        }\n        const status = error.response.status\n        if(status === 404) return universalMessage\n        else if(error.response.message) return error.response.message\n        else return error.message\n    } else if(error.message){\n        return error.message\n    } else if(error.error) {\n        return prepareError(error.error)\n    }\n    return universalMessage\n}\n","import {ADD_ERROR, REMOVE_ERROR} from \"./ui.types\"\nimport {prepareError} from \"./ui.utils\"\nimport {generateId} from \"../../../utils/common\"\n\nconst initialState = {\n    errors: [],\n}\n\nexport function uiReducer(state = initialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case ADD_ERROR:\n            console.error(payload.error)\n            const error = {\n                id: generateId(),\n                message: prepareError(payload.error),\n                date: new Date()\n            }\n            return {...state, errors: [...state.errors, error]}\n        case REMOVE_ERROR:\n            const {error: {id}} = payload\n            return {...state, errors: state.errors.filter(err => err.id !== id)}\n        default:\n            return state\n    }\n}\n\n","import {USER_CLEARED_VISITED_MOVIES, USER_FAVORITE_TOGGLE, USER_VISITED_MOVIE} from \"./user.types\"\n\nconst initialState = {\n    visitedMovieIds: JSON.parse(localStorage.getItem('visitedMovies')) || [],\n    favoriteMovieIds: JSON.parse(localStorage.getItem('favoriteMovies')) || []\n}\n\nexport function userReducer(state = initialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case USER_FAVORITE_TOGGLE: {\n            const id = payload.id\n            let favoriteMovieIds\n            const isFavorite = state.favoriteMovieIds.indexOf(id) !== -1\n            if(isFavorite) favoriteMovieIds = state.favoriteMovieIds.filter(movieId => movieId !== id)\n            else favoriteMovieIds = [id,...state.favoriteMovieIds]\n            localStorage.setItem('favoriteMovies', JSON.stringify(favoriteMovieIds))\n            return {...state, favoriteMovieIds: favoriteMovieIds}\n        }\n        case USER_VISITED_MOVIE: {\n            const id = payload.id\n            const visitedMovieIds = [...new Set([id, ...state.visitedMovieIds])]\n            localStorage.setItem('visitedMovies', JSON.stringify(visitedMovieIds))\n            return {...state, visitedMovieIds: visitedMovieIds}\n        }\n        case USER_CLEARED_VISITED_MOVIES: {\n            localStorage.setItem('visitedMovies', JSON.stringify([]))\n            return {...state, visitedMovieIds: []}\n        }\n        default:\n            return state\n    }\n}\n","// TODO Should I put this reducer in another place?\n\nconst moviesFetchInitialState = {\n    ids: [],\n    isFetching: true,\n    isFetched: false,\n    totalMovies: 0\n}\n\n// Sub-reducer\n// ---\n// Used for widget-like components that load list of movies.\n// The reducer keeps only the ids of movies so you should save the full data of movies in 'entities' reducer.\n// TODO Think of a better name\nexport function moviesFetchReducer(prefix, state = moviesFetchInitialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case prefix + \"_FETCH_REQUEST\":\n            return {...state, isFetching: true}\n        case prefix + \"_FETCH_SUCCESS\":\n            const {total_results: totalMovies, results: movies} = payload\n            const movieIds = movies.map(movie => movie.id)\n            return {\n                ids: [...state.ids, ...movieIds],\n                isFetching: false,\n                isFetched: true,\n                totalMovies: totalMovies\n            }\n        case prefix + \"_FETCH_FAIL\":\n            return {...state, isFetching: false, isFetched: false}\n        default:\n            return state\n    }\n}\n","import {\n    MOVIE_PAGE_FETCH_FAIL,\n    MOVIE_PAGE_FETCH_REQUEST,\n    MOVIE_PAGE_FETCH_SUCCESS,\n    RECOMMENDED_MOVIES_FETCH_FAIL,\n    RECOMMENDED_MOVIES_FETCH_REQUEST,\n    RECOMMENDED_MOVIES_FETCH_SUCCESS,\n    SIMILAR_MOVIES_FETCH_FAIL,\n    SIMILAR_MOVIES_FETCH_REQUEST,\n    SIMILAR_MOVIES_FETCH_SUCCESS\n} from \"./movie.types\"\nimport {moviesFetchReducer} from \"../shared\"\n\nconst initialState = {\n    id: null,\n    isFetching: false,\n    isFetched: false,\n    similarMovies: moviesFetchReducer(\"SIMILAR_MOVIES\", undefined, {}),\n    recommendedMovies: moviesFetchReducer(\"RECOMMENDED_MOVIES\", undefined, {}),\n}\n\nexport function movieReducer(state = initialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case MOVIE_PAGE_FETCH_REQUEST:\n            return {...initialState, isFetching: true}\n        case MOVIE_PAGE_FETCH_FAIL:\n            return {...state, isFetched: false, isFetching: false}\n        case MOVIE_PAGE_FETCH_SUCCESS:\n            return {\n                ...state,\n                id: payload.id,\n                isFetched: true,\n                isFetching: false,\n            }\n        case SIMILAR_MOVIES_FETCH_REQUEST:\n        case SIMILAR_MOVIES_FETCH_SUCCESS:\n        case SIMILAR_MOVIES_FETCH_FAIL:\n            return {\n                ...state,\n                similarMovies: moviesFetchReducer(\"SIMILAR_MOVIES\", state.similarMovies, action)\n            }\n        case RECOMMENDED_MOVIES_FETCH_REQUEST:\n        case RECOMMENDED_MOVIES_FETCH_SUCCESS:\n        case RECOMMENDED_MOVIES_FETCH_FAIL:\n            return {\n                ...state,\n                recommendedMovies: moviesFetchReducer(\"RECOMMENDED_MOVIES\", state.recommendedMovies, action)\n            }\n        default:\n            return state\n    }\n}\n","import {\n    UPCOMING_MOVIES_FETCH_FAIL,\n    UPCOMING_MOVIES_FETCH_REQUEST,\n    UPCOMING_MOVIES_FETCH_SUCCESS,\n    POPULAR_MOVIES_FETCH_FAIL,\n    POPULAR_MOVIES_FETCH_REQUEST,\n    POPULAR_MOVIES_FETCH_SUCCESS, TOP_RATED_MOVIES_FETCH_FAIL,\n    TOP_RATED_MOVIES_FETCH_REQUEST, TOP_RATED_MOVIES_FETCH_SUCCESS\n} from \"./home.types\"\nimport {moviesFetchReducer} from \"../shared\"\n\nconst initialState = {\n    popularMovies: moviesFetchReducer(\"POPULAR_MOVIES\", undefined, {}),\n    topRatedMovies: moviesFetchReducer(\"TOP_RATED_MOVIES\", undefined, {}),\n    upcomingMovies: moviesFetchReducer(\"UPCOMING_MOVIES\", undefined, {}),\n}\n\nexport function homeReducer(state = initialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case POPULAR_MOVIES_FETCH_REQUEST:\n        case POPULAR_MOVIES_FETCH_SUCCESS:\n        case POPULAR_MOVIES_FETCH_FAIL:\n            return {\n                ...state,\n                popularMovies: moviesFetchReducer(\"POPULAR_MOVIES\", state.popularMovies, action)\n            }\n        case TOP_RATED_MOVIES_FETCH_REQUEST:\n        case TOP_RATED_MOVIES_FETCH_SUCCESS:\n        case TOP_RATED_MOVIES_FETCH_FAIL:\n            return {\n                ...state,\n                topRatedMovies: moviesFetchReducer(\"TOP_RATED_MOVIES\", state.topRatedMovies, action)\n            }\n        case UPCOMING_MOVIES_FETCH_REQUEST:\n        case UPCOMING_MOVIES_FETCH_SUCCESS:\n        case UPCOMING_MOVIES_FETCH_FAIL:\n            return {\n                ...state,\n                upcomingMovies: moviesFetchReducer(\"UPCOMING_MOVIES\", state.upcomingMovies, action)\n            }\n        default:\n            return state\n    }\n}\n","import {\n    POPULAR_MOVIES_FETCH_SUCCESS,\n    TOP_RATED_MOVIES_FETCH_SUCCESS,\n    UPCOMING_MOVIES_FETCH_SUCCESS\n} from \"../home/home.types\"\nimport {GENRES_FETCH_SUCCESS} from \"../common/common.types\"\nimport {\n    MOVIE_PAGE_FETCH_SUCCESS,\n    RECOMMENDED_MOVIES_FETCH_SUCCESS,\n    SIMILAR_MOVIES_FETCH_SUCCESS\n} from \"../movie/movie.types\"\nimport {MOVIE_FETCH_SUCCESS} from \"./entities.types\"\nimport {prepareMovie} from \"../../utils\"\n\nconst initialState = {\n    moviesById: {},\n    genresById: {}\n}\n\nexport function entitiesReducer(state = initialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case GENRES_FETCH_SUCCESS: {\n            const genresById = {}\n            for (let genre of payload.genres) {\n                genresById[genre.id] = genre.name\n            }\n            return {...state, genresById: genresById}\n        }\n        case POPULAR_MOVIES_FETCH_SUCCESS:\n        case TOP_RATED_MOVIES_FETCH_SUCCESS:\n        case UPCOMING_MOVIES_FETCH_SUCCESS:\n        case SIMILAR_MOVIES_FETCH_SUCCESS:\n        case RECOMMENDED_MOVIES_FETCH_SUCCESS: {\n            const moviesById = {...state.moviesById}\n            for (let movie of payload.results) {\n                const preparedMovie = prepareMovie({raw: movie, extended: false})\n                if(moviesById[movie.id] && moviesById[movie.id].isExtendedDataLoaded) {\n                    moviesById[movie.id] = {...moviesById[movie.id], ...preparedMovie}\n                } else {\n                    moviesById[movie.id] = preparedMovie\n                }\n                moviesById[movie.id].fetchDate = new Date()\n            }\n            return {...state, moviesById: moviesById}\n        }\n        case MOVIE_PAGE_FETCH_SUCCESS:\n        case MOVIE_FETCH_SUCCESS: {\n            const movie = prepareMovie({raw: payload, extended: true})\n            const moviesById = {...state.moviesById}\n            moviesById[movie.id] = movie\n            moviesById[movie.id].fetchDate = new Date()\n            return {...state, moviesById: moviesById}\n        }\n        default:\n            return state\n    }\n}\n","import {SEARCH_CANCEL, SEARCH_FAIL, SEARCH_QUERY_CHANGED, SEARCH_REQUEST, SEARCH_SUCCESS} from \"./search.types\"\nimport {prepareMovie} from \"../../utils\"\nimport {LOCATION_CHANGE} from 'connected-react-router';\n\nconst initialSearchState = {\n    query: '',\n    isFetching: false,\n    isFetched: false,\n    foundMovies: []\n}\n\n// sub-reducer\nexport function searchReducer(state = initialSearchState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case LOCATION_CHANGE:\n            return initialSearchState\n        case SEARCH_QUERY_CHANGED:\n            return {...state, query: payload.query}\n        case SEARCH_REQUEST:\n            return {...state, isFetching: true, isFetched: false, foundMovies: []}\n        case SEARCH_SUCCESS: {\n            let movies = payload.results.map(movie => prepareMovie({raw: movie, posterSize: 'w154'}))\n            movies = filterEmptyMovies(movies).sort((a, b) => b.popularity - a.popularity)\n            return {\n                ...state,\n                isFetching: false,\n                isFetched: true,\n                foundMovies: movies\n            }\n        }\n        case SEARCH_FAIL:\n        case SEARCH_CANCEL:\n            return {...state, isFetching: false, isFetched: false, foundMovies: []}\n        default:\n            return state\n    }\n}\n\nfunction filterEmptyMovies(movies) {\n    return movies.filter(m => {\n        return !!m.title && m.popularity > 0.25\n    })\n}\n","import {applyMiddleware, combineReducers, createStore, compose} from 'redux'\nimport {createBrowserHistory} from 'history'\nimport {MovieDbApiMiddleware} from \"./middlewares/moviedb-api\"\nimport {createLogger} from \"redux-logger\"\nimport {connectRouter, routerMiddleware} from 'connected-react-router'\nimport {commonReducer} from \"./domains/common/common.reducer\"\nimport {uiReducer} from \"./domains/ui/ui.reducer\"\nimport {userReducer} from \"./domains/user/user.reducer\"\nimport {movieReducer} from \"./domains/movie/movie.reducer\"\nimport {homeReducer} from \"./domains/home/home.reducer\"\nimport {entitiesReducer} from \"./domains/entities/entities.reducer\"\nimport {searchReducer} from \"./domains/search/search.reducer\"\n\nexport const history = createBrowserHistory()\n\nconst getMiddleware = function () {\n    return process.env.NODE_ENV === 'production' ?\n        applyMiddleware(MovieDbApiMiddleware(), routerMiddleware(history)) :\n        applyMiddleware(MovieDbApiMiddleware(), routerMiddleware(history), createLogger())\n}\n\nconst rootReducer = combineReducers({\n    ui: uiReducer,\n    common: commonReducer,\n    user: userReducer,\n    movie: movieReducer,\n    home: homeReducer,\n    search: searchReducer,\n    entities: entitiesReducer,\n    router: connectRouter(history)\n})\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nexport const store = createStore(rootReducer, composeEnhancers(getMiddleware()))\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport {Provider} from \"react-redux\"\nimport { ConnectedRouter } from 'connected-react-router'\nimport {store, history} from \"./store/store\"\n\nReactDOM.render(\n    <Provider store={store}>\n        <ConnectedRouter history={history}>\n            <App />\n        </ConnectedRouter>\n    </Provider>,\n    document.getElementById('root')\n)\n"],"sourceRoot":""}