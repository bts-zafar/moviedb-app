{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Zafar Abbas\\\\Desktop\\\\Moviedb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:\\\\Users\\\\Zafar Abbas\\\\Desktop\\\\Moviedb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import{USER_CLEARED_VISITED_MOVIES,USER_FAVORITE_TOGGLE,USER_VISITED_MOVIE}from\"./user.types\";var initialState={visitedMovieIds:JSON.parse(localStorage.getItem('visitedMovies'))||[],favoriteMovieIds:JSON.parse(localStorage.getItem('favoriteMovies'))||[]};export function userReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;var type=action.type,payload=action.payload;switch(type){case USER_FAVORITE_TOGGLE:{var id=payload.id;var favoriteMovieIds;var isFavorite=state.favoriteMovieIds.indexOf(id)!==-1;if(isFavorite)favoriteMovieIds=state.favoriteMovieIds.filter(function(movieId){return movieId!==id;});else favoriteMovieIds=[id].concat(_toConsumableArray(state.favoriteMovieIds));localStorage.setItem('favoriteMovies',JSON.stringify(favoriteMovieIds));return _objectSpread({},state,{favoriteMovieIds:favoriteMovieIds});}case USER_VISITED_MOVIE:{var _id=payload.id;var visitedMovieIds=_toConsumableArray(new Set([_id].concat(_toConsumableArray(state.visitedMovieIds))));localStorage.setItem('visitedMovies',JSON.stringify(visitedMovieIds));return _objectSpread({},state,{visitedMovieIds:visitedMovieIds});}case USER_CLEARED_VISITED_MOVIES:{localStorage.setItem('visitedMovies',JSON.stringify([]));return _objectSpread({},state,{visitedMovieIds:[]});}default:return state;}}","map":{"version":3,"sources":["C:/Users/Zafar Abbas/Desktop/Moviedb/src/store/domains/user/user.reducer.js"],"names":["USER_CLEARED_VISITED_MOVIES","USER_FAVORITE_TOGGLE","USER_VISITED_MOVIE","initialState","visitedMovieIds","JSON","parse","localStorage","getItem","favoriteMovieIds","userReducer","state","action","type","payload","id","isFavorite","indexOf","filter","movieId","setItem","stringify","Set"],"mappings":"mQAAA,OAAQA,2BAAR,CAAqCC,oBAArC,CAA2DC,kBAA3D,KAAoF,cAApF,CAEA,GAAMC,CAAAA,YAAY,CAAG,CACjBC,eAAe,CAAEC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAX,GAAqD,EADrD,CAEjBC,gBAAgB,CAAEJ,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAX,GAAsD,EAFvD,CAArB,CAKA,MAAO,SAASE,CAAAA,WAAT,EAAmD,IAA9BC,CAAAA,KAA8B,2DAAtBR,YAAsB,IAARS,CAAAA,MAAQ,8CAC/CC,CAAAA,IAD+C,CAC9BD,MAD8B,CAC/CC,IAD+C,CACzCC,OADyC,CAC9BF,MAD8B,CACzCE,OADyC,CAEtD,OAAQD,IAAR,EACI,IAAKZ,CAAAA,oBAAL,CAA2B,CACvB,GAAMc,CAAAA,EAAE,CAAGD,OAAO,CAACC,EAAnB,CACA,GAAIN,CAAAA,gBAAJ,CACA,GAAMO,CAAAA,UAAU,CAAGL,KAAK,CAACF,gBAAN,CAAuBQ,OAAvB,CAA+BF,EAA/B,IAAuC,CAAC,CAA3D,CACA,GAAGC,UAAH,CAAeP,gBAAgB,CAAGE,KAAK,CAACF,gBAAN,CAAuBS,MAAvB,CAA8B,SAAAC,OAAO,QAAIA,CAAAA,OAAO,GAAKJ,EAAhB,EAArC,CAAnB,CAAf,IACKN,CAAAA,gBAAgB,EAAIM,EAAJ,4BAAUJ,KAAK,CAACF,gBAAhB,EAAhB,CACLF,YAAY,CAACa,OAAb,CAAqB,gBAArB,CAAuCf,IAAI,CAACgB,SAAL,CAAeZ,gBAAf,CAAvC,EACA,wBAAWE,KAAX,EAAkBF,gBAAgB,CAAEA,gBAApC,GACH,CACD,IAAKP,CAAAA,kBAAL,CAAyB,CACrB,GAAMa,CAAAA,GAAE,CAAGD,OAAO,CAACC,EAAnB,CACA,GAAMX,CAAAA,eAAe,oBAAO,GAAIkB,CAAAA,GAAJ,EAASP,GAAT,4BAAgBJ,KAAK,CAACP,eAAtB,GAAP,CAArB,CACAG,YAAY,CAACa,OAAb,CAAqB,eAArB,CAAsCf,IAAI,CAACgB,SAAL,CAAejB,eAAf,CAAtC,EACA,wBAAWO,KAAX,EAAkBP,eAAe,CAAEA,eAAnC,GACH,CACD,IAAKJ,CAAAA,2BAAL,CAAkC,CAC9BO,YAAY,CAACa,OAAb,CAAqB,eAArB,CAAsCf,IAAI,CAACgB,SAAL,CAAe,EAAf,CAAtC,EACA,wBAAWV,KAAX,EAAkBP,eAAe,CAAE,EAAnC,GACH,CACD,QACI,MAAOO,CAAAA,KAAP,CArBR,CAuBH","sourcesContent":["import {USER_CLEARED_VISITED_MOVIES, USER_FAVORITE_TOGGLE, USER_VISITED_MOVIE} from \"./user.types\"\n\nconst initialState = {\n    visitedMovieIds: JSON.parse(localStorage.getItem('visitedMovies')) || [],\n    favoriteMovieIds: JSON.parse(localStorage.getItem('favoriteMovies')) || []\n}\n\nexport function userReducer(state = initialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case USER_FAVORITE_TOGGLE: {\n            const id = payload.id\n            let favoriteMovieIds\n            const isFavorite = state.favoriteMovieIds.indexOf(id) !== -1\n            if(isFavorite) favoriteMovieIds = state.favoriteMovieIds.filter(movieId => movieId !== id)\n            else favoriteMovieIds = [id,...state.favoriteMovieIds]\n            localStorage.setItem('favoriteMovies', JSON.stringify(favoriteMovieIds))\n            return {...state, favoriteMovieIds: favoriteMovieIds}\n        }\n        case USER_VISITED_MOVIE: {\n            const id = payload.id\n            const visitedMovieIds = [...new Set([id, ...state.visitedMovieIds])]\n            localStorage.setItem('visitedMovies', JSON.stringify(visitedMovieIds))\n            return {...state, visitedMovieIds: visitedMovieIds}\n        }\n        case USER_CLEARED_VISITED_MOVIES: {\n            localStorage.setItem('visitedMovies', JSON.stringify([]))\n            return {...state, visitedMovieIds: []}\n        }\n        default:\n            return state\n    }\n}\n"]},"metadata":{},"sourceType":"module"}