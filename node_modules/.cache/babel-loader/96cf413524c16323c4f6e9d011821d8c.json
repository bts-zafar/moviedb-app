{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Zafar Abbas\\\\Desktop\\\\moviedb-react-app-master\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import React,{useCallback,useEffect}from'react';import{useParams}from\"react-router\";import{connect}from\"react-redux\";import LazyLoad from'react-lazyload';import Container from\"@material-ui/core/Container\";import Grid from\"@material-ui/core/Grid\";import Typography from\"@material-ui/core/Typography\";import Rating from\"@material-ui/lab/Rating\";import{makeStyles}from\"@material-ui/core/styles\";import{fetchMoviePage,fetchRecommendedMovies as _fetchRecommendedMovies,fetchSimilarMovies as _fetchSimilarMovies}from\"../store/domains/movie/movie.actions\";import{getMovie}from\"../store/utils\";import MovieBrowser from\"./MovieBrowser\";import MoviePagePlaceholder from\"./placeholders/MoviePagePlaceholder\";import FavoriteIcon from\"@material-ui/icons/Favorite\";import Button from\"@material-ui/core/Button\";import{makeMovieVisited as _makeMovieVisited,toggleFavorite as _toggleFavorite}from\"../store/domains/user/user.actions\";import{Formatter}from\"./utils/formatter\";import EmptyBlock from\"./placeholders/EmptyBlock\";import TheatersIcon from'@material-ui/icons/Theaters';import{BorderAllOutlined,HomeRounded}from'@material-ui/icons';import{borders}from'@material-ui/system';import{Link}from'react-router-dom';function Movie(props){var _useParams=useParams(),urlId=_useParams.id;var isAppReady=props.isAppReady,movie=props.movie,fetchMovie=props.fetchMovie,toggleFavorite=props.toggleFavorite,makeMovieVisited=props.makeMovieVisited;useEffect(function(){fetchMovie(urlId);window.scrollTo({top:0,left:0});},[urlId,fetchMovie]);useEffect(function(){if(movie.isFetched)makeMovieVisited(movie.id);},[movie.id,makeMovieVisited]);return React.createElement(React.Fragment,null,React.createElement(MovieInfo,{movie:movie,loaded:isAppReady&&movie.isFetched,onFavorite:toggleFavorite}),React.createElement(MovieRecommendations,Object.assign({},props,{id:urlId})));}var useStyles=makeStyles(function(theme){return{movieContainer:{paddingTop:50,paddingBottom:50},backdrop:{position:'absolute',height:'100%',width:'100%',zIndex:-1,'&:after':{position:'absolute',content:\"''\",display:'block',top:0,left:0,width:'100%',height:'100%',background:'rgba(30, 47, 60, 0.75)',backgroundImage:'radial-gradient(circle at 20% 50%, rgba(30, 47, 60, 0.75) 0%, rgba(48, 65, 78, 0.75) 100%)'}},backdropImage:{display:'block',width:'100%',height:'100%',objectFit:'cover'},poster:{width:'100%',borderRadius:10,boxShadow:'0px 3px 20px #0000003b'},releaseDate:{fontSize:'11pt',color:'#dadde2'},vote:{display:'flex',alignItems:'center',fontSize:'12pt'},genreList:{listStyle:'none',padding:0,display:'flex',flexWrap:'wrap'},genre:{cursor:'pointer',padding:'1px 6px',marginRight:10,border:'1px solid white',borderRadius:4,fontSize:'10pt'},subtitle:{marginBottom:8,fontSize:'13pt'},crewList:{listStyle:'none',padding:0}};});function MovieInfo(_ref){var movie=_ref.movie,loaded=_ref.loaded,onFavorite=_ref.onFavorite;var id=movie.id,title=movie.title,genres=movie.genres,duration=movie.duration,budget=movie.budget,backdropImageUrl=movie.backdropImageUrl,posterImageUrl=movie.posterImageUrl,releaseDate=movie.releaseDate,productionCountries=movie.productionCountries,voteAverage=movie.voteAverage,legend=movie.legend,overview=movie.overview,crew=movie.crew,actors=movie.actors,isFavorite=movie.isFavorite;var classes=useStyles();var handleClick=function handleClick(){window.open('/Page404');};var poster=posterImageUrl||require('../assets/images/abstract_movie_poster.svg');// TODO Add backdrop fallback\n// const backdrop = backdropImageUrl\n// TODO Sort actors and crew by their popularity/importance\nreturn React.createElement(\"main\",{style:{position:'relative'}},React.createElement(\"div\",{className:classes.backdrop},React.createElement(\"img\",{className:classes.backdropImage,src:backdropImageUrl,alt:\"Backdrop of \"+title})),React.createElement(Container,{className:classes.movieContainer},loaded?React.createElement(Grid,{container:true,spacing:7},React.createElement(Grid,{item:true,md:3},React.createElement(\"img\",{className:classes.poster,src:poster,alt:\"Poster of \"+title})),React.createElement(Grid,{item:true,md:9,style:{color:'white'}},React.createElement(\"div\",{className:classes.releaseDate},Formatter.formatDate(releaseDate),\" (\",productionCountries.join(', '),\")\"),React.createElement(Typography,{variant:\"h4\",style:{fontWeight:'bold'},component:\"h1\"},title),React.createElement(\"ul\",{className:classes.genreList},genres.map(function(genre){return React.createElement(\"li\",{className:classes.genre,key:genre},genre);})),React.createElement(\"div\",{className:classes.vote},React.createElement(Rating,{value:voteAverage/2,readOnly:true}),React.createElement(\"span\",{style:{margin:'2px 0px 0 6px'}},voteAverage,\"/10\"),React.createElement(Button,{style:{marginLeft:16},onClick:function onClick(){return onFavorite(id);},variant:isFavorite?\"contained\":\"outlined\",color:\"secondary\",\"aria-label\":\"like\"},React.createElement(FavoriteIcon,null),\" Add to Favourites\"),React.createElement(Button,{style:{marginLeft:25},onClick:handleClick,variant:handleClick?\"contained\":\"outlined\",color:\"primary\",\"aria-label\":\"like\"},React.createElement(TheatersIcon,null),\" Show Preview\"),React.createElement(Button,{href:\"/\",style:{color:\"#1FAA59\",marginLeft:\"25px\"},variant:handleClick?\"contained\":\"outlined\"},React.createElement(HomeRounded,null),\" Home\")),React.createElement(\"div\",{style:{marginTop:10}},React.createElement(Typography,{component:\"div\",style:{marginRight:15}},React.createElement(\"b\",null,\"Duration:\"),\" \",duration,\" min.\"),React.createElement(Typography,{component:\"div\"},React.createElement(\"b\",null,\"Budget:\"),\" \",budget?'$'+Formatter.numberWithCommas(budget):'-')),legend&&React.createElement(React.Fragment,null,React.createElement(\"h3\",{className:classes.subtitle},\"Legend\"),React.createElement(Typography,{variant:\"body1\"},legend)),overview&&React.createElement(React.Fragment,null,React.createElement(\"h3\",{className:classes.subtitle},\"Overview\"),React.createElement(Typography,{variant:\"body1\"},overview)),crew.length&&React.createElement(React.Fragment,null,React.createElement(\"h3\",{className:classes.subtitle},\"Crew\"),React.createElement(Grid,{container:true,spacing:3,component:\"ul\",className:classes.crewList},crew.slice(0,4).map(function(person,i){return React.createElement(Grid,{item:true,md:3,sm:6,component:\"li\",key:i,style:{paddingRight:16}},React.createElement(Typography,{variant:\"body2\",style:{fontWeight:'bold'}},person.name),React.createElement(Typography,{variant:\"body2\"},person.department,\", \",person.job));}))))):React.createElement(MoviePagePlaceholder,null)));}function MovieRecommendations(props){var id=props.id,movie=props.movie,entities=props.entities,user=props.user,toggleFavorite=props.toggleFavorite,fetchSimilarMovies=props.fetchSimilarMovies,fetchRecommendedMovies=props.fetchRecommendedMovies;var recommended=movie.recommendedMovies,similar=movie.similarMovies;var MOVIES_PER_LIST=6;var recommendedMovies=recommended.ids.slice(0,MOVIES_PER_LIST).map(function(id){return getMovie(id,entities,user);});var similarMovies=similar.ids.slice(0,MOVIES_PER_LIST).map(function(id){return getMovie(id,entities,user);});var fetchSimilarMoviesCb=useCallback(function(){return fetchSimilarMovies(id);},[id,fetchSimilarMovies]);var fetchRecommendedMoviesCb=useCallback(function(){return fetchRecommendedMovies(id);},[id,fetchRecommendedMovies]);return React.createElement(Container,null,React.createElement(\"section\",null,React.createElement(\"h2\",null,\"Recommended movies\"),React.createElement(LazyLoad,{height:400},React.createElement(MovieList,{isFetching:recommended.isFetching,isFetched:recommended.isFetched,movies:recommendedMovies,amount:MOVIES_PER_LIST,fetch:fetchRecommendedMoviesCb,onFavorite:toggleFavorite}))),React.createElement(\"section\",null,React.createElement(\"h2\",null,\"Similar movies\"),React.createElement(LazyLoad,{height:400},React.createElement(MovieList,{isFetching:similar.isFetching,isFetched:similar.isFetched,movies:similarMovies,amount:MOVIES_PER_LIST,fetch:fetchSimilarMoviesCb,onFavorite:toggleFavorite}))));}function MovieList(_ref2){var isFetching=_ref2.isFetching,isFetched=_ref2.isFetched,_ref2$movies=_ref2.movies,movies=_ref2$movies===void 0?[]:_ref2$movies,amount=_ref2.amount,fetch=_ref2.fetch,onFavorite=_ref2.onFavorite;useEffect(function(){fetch();},[fetch]);if(isFetched&&!movies.length)return React.createElement(EmptyBlock,{text:\"There is no data for this movie\"});return React.createElement(MovieBrowser,{placeholdersAmount:amount,isFetching:isFetching,isFetched:isFetched,movies:movies,onFavorite:onFavorite});}function mapStateToProps(state){var movie=state.movie.isFetched?getMovie(state.movie.id,state.entities,state.user):{};movie=_objectSpread({},movie,{},state.movie);return{isAppReady:state.common.isAppReady,movie:movie,entities:state.entities,user:state.user};}function mapDispatchToProps(dispatch){return{fetchMovie:function fetchMovie(id){return dispatch(fetchMoviePage(id));},fetchSimilarMovies:function fetchSimilarMovies(id){return dispatch(_fetchSimilarMovies(id));},fetchRecommendedMovies:function fetchRecommendedMovies(id){return dispatch(_fetchRecommendedMovies(id));},toggleFavorite:function toggleFavorite(id){return dispatch(_toggleFavorite(id));},makeMovieVisited:function makeMovieVisited(id){return dispatch(_makeMovieVisited(id));}};}export default connect(mapStateToProps,mapDispatchToProps)(Movie);","map":{"version":3,"sources":["C:/Users/Zafar Abbas/Desktop/moviedb-react-app-master/src/components/Movie.js"],"names":["React","useCallback","useEffect","useParams","connect","LazyLoad","Container","Grid","Typography","Rating","makeStyles","fetchMoviePage","fetchRecommendedMovies","fetchSimilarMovies","getMovie","MovieBrowser","MoviePagePlaceholder","FavoriteIcon","Button","makeMovieVisited","toggleFavorite","Formatter","EmptyBlock","TheatersIcon","BorderAllOutlined","HomeRounded","borders","Link","Movie","props","urlId","id","isAppReady","movie","fetchMovie","window","scrollTo","top","left","isFetched","useStyles","theme","movieContainer","paddingTop","paddingBottom","backdrop","position","height","width","zIndex","content","display","background","backgroundImage","backdropImage","objectFit","poster","borderRadius","boxShadow","releaseDate","fontSize","color","vote","alignItems","genreList","listStyle","padding","flexWrap","genre","cursor","marginRight","border","subtitle","marginBottom","crewList","MovieInfo","loaded","onFavorite","title","genres","duration","budget","backdropImageUrl","posterImageUrl","productionCountries","voteAverage","legend","overview","crew","actors","isFavorite","classes","handleClick","open","require","formatDate","join","fontWeight","map","margin","marginLeft","marginTop","numberWithCommas","length","slice","person","i","paddingRight","name","department","job","MovieRecommendations","entities","user","recommended","recommendedMovies","similar","similarMovies","MOVIES_PER_LIST","ids","fetchSimilarMoviesCb","fetchRecommendedMoviesCb","isFetching","MovieList","movies","amount","fetch","mapStateToProps","state","common","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, {useCallback, useEffect} from 'react'\nimport {useParams} from \"react-router\"\nimport {connect} from \"react-redux\"\nimport LazyLoad from 'react-lazyload'\nimport Container from \"@material-ui/core/Container\"\nimport Grid from \"@material-ui/core/Grid\"\nimport Typography from \"@material-ui/core/Typography\"\nimport Rating from \"@material-ui/lab/Rating\"\nimport {makeStyles} from \"@material-ui/core/styles\"\nimport {fetchMoviePage, fetchRecommendedMovies, fetchSimilarMovies} from \"../store/domains/movie/movie.actions\"\nimport {getMovie} from \"../store/utils\"\nimport MovieBrowser from \"./MovieBrowser\"\nimport MoviePagePlaceholder from \"./placeholders/MoviePagePlaceholder\"\nimport FavoriteIcon from \"@material-ui/icons/Favorite\"\nimport Button from \"@material-ui/core/Button\"\nimport {makeMovieVisited, toggleFavorite} from \"../store/domains/user/user.actions\"\nimport {Formatter} from \"./utils/formatter\"\nimport EmptyBlock from \"./placeholders/EmptyBlock\"\nimport TheatersIcon from '@material-ui/icons/Theaters';\nimport { BorderAllOutlined, HomeRounded } from '@material-ui/icons'\nimport { borders } from '@material-ui/system';\nimport { Link } from 'react-router-dom'\nfunction Movie(props) {\n    const {id: urlId} = useParams()\n    const {\n        isAppReady,\n        movie,\n        fetchMovie,\n        toggleFavorite,\n        makeMovieVisited,\n    } = props\n\n    useEffect(function () {\n        fetchMovie(urlId)\n        window.scrollTo({top: 0, left: 0})\n    }, [urlId, fetchMovie])\n\n    useEffect(function () {\n        if(movie.isFetched) makeMovieVisited(movie.id)\n    }, [movie.id, makeMovieVisited])\n\n    return (\n        <React.Fragment>\n            <MovieInfo movie={movie} loaded={isAppReady && movie.isFetched} onFavorite={toggleFavorite}/>\n            <MovieRecommendations {...props} id={urlId}/>\n        </React.Fragment>\n    )\n}\n\nconst useStyles = makeStyles(theme => ({\n    movieContainer: {\n        paddingTop: 50,\n        paddingBottom: 50,\n    },\n    backdrop: {\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: -1,\n        '&:after': {\n            position: 'absolute',\n            content: \"''\",\n            display: 'block',\n            top: 0,\n            left: 0,\n            width: '100%',\n            height: '100%',\n            background: 'rgba(30, 47, 60, 0.75)',\n            backgroundImage: 'radial-gradient(circle at 20% 50%, rgba(30, 47, 60, 0.75) 0%, rgba(48, 65, 78, 0.75) 100%)'\n        }\n    },\n    backdropImage: {\n        display: 'block',\n        width: '100%',\n        height: '100%',\n        objectFit: 'cover',\n    },\n    poster: {\n        width: '100%',\n        borderRadius: 10,\n        boxShadow: '0px 3px 20px #0000003b',\n    },\n    releaseDate: {\n        fontSize: '11pt',\n        color: '#dadde2'\n    },\n    vote: {\n        display: 'flex',\n        alignItems: 'center',\n        fontSize: '12pt'\n    },\n    genreList: {\n        listStyle: 'none',\n        padding: 0,\n        display: 'flex',\n        flexWrap: 'wrap',\n    },\n    genre: {\n        cursor: 'pointer',\n        padding: '1px 6px',\n        marginRight: 10,\n        border: '1px solid white',\n        borderRadius: 4,\n        fontSize: '10pt'\n    },\n    subtitle: {\n        marginBottom: 8,\n        fontSize: '13pt'\n    },\n    crewList: {\n        listStyle: 'none',\n        padding: 0,\n    },\n}))\n\nfunction MovieInfo({movie, loaded, onFavorite}) {\n    const {\n        id,\n        title,\n        genres,\n        duration,\n        budget,\n        backdropImageUrl,\n        posterImageUrl,\n        releaseDate,\n        productionCountries,\n        voteAverage,\n        legend,\n        overview,\n        crew,\n        actors,\n\n        isFavorite\n    } = movie\n\n    const classes = useStyles()\n\n    const handleClick = () => {\n        window.open('/Page404')\n    }\n    \n    \n\n    const poster = posterImageUrl || require('../assets/images/abstract_movie_poster.svg')\n    // TODO Add backdrop fallback\n    // const backdrop = backdropImageUrl\n\n    // TODO Sort actors and crew by their popularity/importance\n\n    return (\n        <main style={{position: 'relative'}}>\n            <div className={classes.backdrop}>\n                <img className={classes.backdropImage} src={backdropImageUrl} alt={\"Backdrop of \" + title}/>\n            </div>\n            <Container className={classes.movieContainer}>\n                {loaded ?\n                    <Grid container spacing={7}>\n                        <Grid item md={3}>\n                            <img className={classes.poster} src={poster} alt={\"Poster of \" + title}/>\n                        </Grid>\n                        <Grid item md={9} style={{color: 'white'}}>\n                            <div className={classes.releaseDate}>\n                                {Formatter.formatDate(releaseDate)} ({productionCountries.join(', ')})\n                            </div>\n                            <Typography variant={\"h4\"} style={{fontWeight: 'bold'}} component={\"h1\"}>\n                                {title}              \n                              \n                            </Typography>\n                               \n                            <ul className={classes.genreList}>\n                                {genres.map(genre => (\n                                    <li className={classes.genre} key={genre}>{genre}</li>\n                                ))}\n                            </ul>\n                            <div className={classes.vote}>\n                                <Rating value={voteAverage / 2} readOnly/>\n                                <span style={{margin: '2px 0px 0 6px'}}>{voteAverage}/10</span>\n                                <Button\n                                    style={{marginLeft: 16}}\n                                    onClick={() => onFavorite(id)}\n                                    variant={isFavorite ? \"contained\" : \"outlined\"}\n                                    color=\"secondary\"\n                                    aria-label=\"like\"\n                                >\n                                    <FavoriteIcon/> Add to Favourites\n                                </Button>\n                                <Button\n                                 style={{marginLeft: 25}}\n                                 onClick={handleClick}\n                                 variant={handleClick ? \"contained\" : \"outlined\"}\n                                 color=\"primary\"\n                                 aria-label=\"like\"\n                                >\n                                   <TheatersIcon /> Show Preview\n                                </Button>\n                                <Button  href=\"/\"\n                                style={{\n                                    color: \"#1FAA59\",\n                                    marginLeft : \"25px\",\n                                    \n                                    \n                                }}\n                                 \n                                 variant={handleClick ? \"contained\" : \"outlined\"}\n                                 >\n                                   <HomeRounded /> Home\n                                </Button>\n                            </div>\n                            <div style={{marginTop: 10}}>\n                                <Typography component={\"div\"} style={{marginRight: 15}}>\n                                    <b>Duration:</b> {duration} min.\n                                </Typography>\n                                <Typography component={\"div\"}>\n                                    <b>Budget:</b> {budget ? '$' + Formatter.numberWithCommas(budget) : '-'}\n                                </Typography>\n                            </div>\n                            {legend && <React.Fragment>\n                                <h3 className={classes.subtitle}>Legend</h3>\n                                <Typography variant={\"body1\"}>{legend}</Typography>\n                            </React.Fragment>}\n                            {overview && <React.Fragment>\n                                <h3 className={classes.subtitle}>Overview</h3>\n                                <Typography variant={\"body1\"}>{overview}</Typography>\n                            </React.Fragment>}\n                            {crew.length && <React.Fragment>\n                                <h3 className={classes.subtitle}>Crew</h3>\n                                <Grid container spacing={3} component=\"ul\" className={classes.crewList}>\n                                    {crew.slice(0, 4).map((person, i) => (\n                                        <Grid item md={3} sm={6} component=\"li\" key={i} style={{paddingRight: 16}}>\n                                            <Typography variant={\"body2\"}\n                                                        style={{fontWeight: 'bold'}}>{person.name}</Typography>\n                                            <Typography\n                                                variant={\"body2\"}>{person.department}, {person.job}</Typography>\n                                        </Grid>\n                                    ))}\n                                </Grid>\n                            </React.Fragment>}\n                        </Grid>\n                    </Grid> :\n                    <MoviePagePlaceholder/>}\n            </Container>\n        </main>\n    )\n}\n\nfunction MovieRecommendations(props) {\n    const {\n        id,\n\n        movie,\n        entities,\n        user,\n\n        toggleFavorite,\n        fetchSimilarMovies,\n        fetchRecommendedMovies,\n    } = props\n\n    const {recommendedMovies: recommended, similarMovies: similar} = movie\n\n    const MOVIES_PER_LIST = 6\n\n    const recommendedMovies = recommended.ids.slice(0, MOVIES_PER_LIST).map(id => getMovie(id, entities, user))\n    const similarMovies = similar.ids.slice(0, MOVIES_PER_LIST).map(id => getMovie(id, entities, user))\n\n    const fetchSimilarMoviesCb = useCallback(() => fetchSimilarMovies(id), [id, fetchSimilarMovies])\n    const fetchRecommendedMoviesCb = useCallback(() => fetchRecommendedMovies(id), [id, fetchRecommendedMovies])\n\n    return (\n        <Container>\n            <section>\n                <h2>Recommended movies</h2>\n                <LazyLoad height={400}>\n                    <MovieList\n                        isFetching={recommended.isFetching}\n                        isFetched={recommended.isFetched}\n                        movies={recommendedMovies}\n                        amount={MOVIES_PER_LIST}\n                        fetch={fetchRecommendedMoviesCb}\n                        onFavorite={toggleFavorite}\n                    />\n                </LazyLoad>\n            </section>\n            <section>\n                <h2>Similar movies</h2>\n                <LazyLoad height={400}>\n                    <MovieList\n                        isFetching={similar.isFetching}\n                        isFetched={similar.isFetched}\n                        movies={similarMovies}\n                        amount={MOVIES_PER_LIST}\n                        fetch={fetchSimilarMoviesCb}\n                        onFavorite={toggleFavorite}\n                    />\n                </LazyLoad>\n            </section>\n        </Container>\n    )\n}\n\n\nfunction MovieList({isFetching, isFetched, movies = [], amount, fetch, onFavorite}) {\n\n    useEffect(function () {\n        fetch()\n    }, [fetch])\n\n    if (isFetched && !movies.length) return (\n        <EmptyBlock text={\"There is no data for this movie\"} />\n    )\n\n    return (\n        <MovieBrowser placeholdersAmount={amount}\n                      isFetching={isFetching}\n                      isFetched={isFetched}\n                      movies={movies}\n                      onFavorite={onFavorite}\n        />\n    )\n}\n\nfunction mapStateToProps(state) {\n    let movie = state.movie.isFetched ? getMovie(state.movie.id, state.entities, state.user) : {}\n    movie = {...movie, ...state.movie}\n    return {\n        isAppReady: state.common.isAppReady,\n        movie: movie,\n        entities: state.entities,\n        user: state.user\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        fetchMovie: (id) => dispatch(fetchMoviePage(id)),\n        fetchSimilarMovies: (id) => dispatch(fetchSimilarMovies(id)),\n        fetchRecommendedMovies: (id) => dispatch(fetchRecommendedMovies(id)),\n        toggleFavorite: (id) => dispatch(toggleFavorite(id)),\n        makeMovieVisited: (id) => dispatch(makeMovieVisited(id))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Movie)\n"]},"metadata":{},"sourceType":"module"}