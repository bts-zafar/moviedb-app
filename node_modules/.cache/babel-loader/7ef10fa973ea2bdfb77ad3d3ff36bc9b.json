{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\Zafar Abbas\\\\Desktop\\\\Moviedb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _slicedToArray from\"C:\\\\Users\\\\Zafar Abbas\\\\Desktop\\\\Moviedb\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Container from\"@material-ui/core/Container\";import Tabs from\"@material-ui/core/Tabs\";import Tab from\"@material-ui/core/Tab\";import MovieBrowser from\"./MovieBrowser\";import{makeStyles}from\"@material-ui/core/styles\";import{connect}from\"react-redux\";import{fetchPopularMovies as _fetchPopularMovies,fetchTopRatedMovies as _fetchTopRatedMovies,fetchUpcomingMovies as _fetchUpcomingMovies}from\"../store/domains/home/home.actions\";import{toggleFavorite as _toggleFavorite}from\"../store/domains/user/user.actions\";import{getMovie}from\"../store/utils\";import withStyles from\"@material-ui/core/styles/withStyles\";var useStyles=makeStyles(function(theme){return{movieList:{margin:'20px 0px'},container:{margin:'12px auto'}};});var CustomTabs=withStyles({root:{textAlign:'center',borderRadius:4,// border: '1px solid black',\noverflow:'hidden',background:'#66AD47'},indicator:{background:'none'}})(Tabs);var CustomTab=withStyles({root:{minWidth:110},selected:{background:'#F4BE2C',color:'white'}})(Tab);var categories={POPULAR:'popular',TOP_RATED:'top-rated',UPCOMING:'upcoming'};var MOVIES_PER_PAGE=20;function Home(props){var _categoryMap;var isAppReady=props.isAppReady,popularMovies=props.popularMovies,topRatedMovies=props.topRatedMovies,upcomingMovies=props.upcomingMovies,entities=props.entities,user=props.user,toggleFavorite=props.toggleFavorite,fetchPopularMovies=props.fetchPopularMovies,fetchTopRatedMovies=props.fetchTopRatedMovies,fetchUpcomingMovies=props.fetchUpcomingMovies;var _useState=useState(categories.POPULAR),_useState2=_slicedToArray(_useState,2),categoryName=_useState2[0],setCategoryName=_useState2[1];var categoryMap=(_categoryMap={},_defineProperty(_categoryMap,categories.POPULAR,{movies:popularMovies,fetch:fetchPopularMovies}),_defineProperty(_categoryMap,categories.TOP_RATED,{movies:topRatedMovies,fetch:fetchTopRatedMovies}),_defineProperty(_categoryMap,categories.UPCOMING,{movies:upcomingMovies,fetch:fetchUpcomingMovies}),_categoryMap);var category=categoryMap[categoryName];var movies=isAppReady?category.movies.ids.map(function(id){return getMovie(id,entities,user);}):[];function loadMore(){if(category.movies.totalMovies===category.movies.ids.length)return;category.fetch(category.movies.ids.length/MOVIES_PER_PAGE+1);}function switchTab(name){setCategoryName(name);var newCategory=categoryMap[name];if(!newCategory.movies.ids.length)newCategory.fetch();}useEffect(function(){switchTab(categories.POPULAR);// TODO Should I memorize the function and constants?\n// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var classes=useStyles();return React.createElement(Container,{className:classes.container},React.createElement(CustomTabs,{value:categoryName,onChange:function onChange(e,newValue){return switchTab(newValue);},\"aria-label\":\"disabled tabs example\"},React.createElement(CustomTab,{label:\"Popular\",value:categories.POPULAR}),React.createElement(CustomTab,{label:\"Top rated\",value:categories.TOP_RATED}),React.createElement(CustomTab,{label:\"Upcoming\",value:categories.UPCOMING})),React.createElement(\"main\",{className:classes.movieList},React.createElement(MovieBrowser,{onLoadMore:loadMore,placeholdersAmount:10,movies:movies,onFavorite:toggleFavorite,isFetched:category.movies.isFetched,isFetching:!isAppReady||category.movies.isFetching,totalMovies:category.movies.totalMovies})));}function mapStateToProps(state){return{isAppReady:state.common.isAppReady,popularMovies:state.home.popularMovies,topRatedMovies:state.home.topRatedMovies,upcomingMovies:state.home.upcomingMovies,entities:state.entities,user:state.user};}function mapDispatchToProps(dispatch){return{fetchPopularMovies:function fetchPopularMovies(page){return dispatch(_fetchPopularMovies(page));},fetchTopRatedMovies:function fetchTopRatedMovies(page){return dispatch(_fetchTopRatedMovies(page));},fetchUpcomingMovies:function fetchUpcomingMovies(page){return dispatch(_fetchUpcomingMovies(page));},toggleFavorite:function toggleFavorite(id){return dispatch(_toggleFavorite(id));}};}export default connect(mapStateToProps,mapDispatchToProps)(Home);","map":{"version":3,"sources":["C:/Users/Zafar Abbas/Desktop/Moviedb/src/components/Home.js"],"names":["React","useEffect","useState","Container","Tabs","Tab","MovieBrowser","makeStyles","connect","fetchPopularMovies","fetchTopRatedMovies","fetchUpcomingMovies","toggleFavorite","getMovie","withStyles","useStyles","theme","movieList","margin","container","CustomTabs","root","textAlign","borderRadius","overflow","background","indicator","CustomTab","minWidth","selected","color","categories","POPULAR","TOP_RATED","UPCOMING","MOVIES_PER_PAGE","Home","props","isAppReady","popularMovies","topRatedMovies","upcomingMovies","entities","user","categoryName","setCategoryName","categoryMap","movies","fetch","category","ids","map","id","loadMore","totalMovies","length","switchTab","name","newCategory","classes","e","newValue","isFetched","isFetching","mapStateToProps","state","common","home","mapDispatchToProps","dispatch","page"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport Container from \"@material-ui/core/Container\"\nimport Tabs from \"@material-ui/core/Tabs\"\nimport Tab from \"@material-ui/core/Tab\"\nimport MovieBrowser from \"./MovieBrowser\"\nimport {makeStyles} from \"@material-ui/core/styles\"\nimport {connect} from \"react-redux\"\nimport {fetchPopularMovies, fetchTopRatedMovies, fetchUpcomingMovies} from \"../store/domains/home/home.actions\"\nimport {toggleFavorite} from \"../store/domains/user/user.actions\"\nimport {getMovie} from \"../store/utils\"\nimport withStyles from \"@material-ui/core/styles/withStyles\"\n\nconst useStyles = makeStyles(theme => ({\n    movieList: {\n        margin: '20px 0px'\n    },\n    container: {\n        margin: '12px auto'\n    },\n}))\n\nconst CustomTabs = withStyles({\n    root: {\n        textAlign: 'center',\n        borderRadius: 4,\n        // border: '1px solid black',\n        overflow: 'hidden',\n        background: '#66AD47',\n    },\n    indicator: {\n        background: 'none'\n    }\n})(Tabs)\n\nconst CustomTab = withStyles({\n    root: {\n        minWidth: 110,\n    },\n    selected: {\n        background: '#F4BE2C',\n        color: 'white'\n    }\n})(Tab)\n\nconst categories = {\n    POPULAR: 'popular',\n    TOP_RATED: 'top-rated',\n    UPCOMING: 'upcoming'\n}\n\nconst MOVIES_PER_PAGE = 20\n\nfunction Home(props) {\n    const {\n        isAppReady,\n\n        popularMovies,\n        topRatedMovies,\n        upcomingMovies,\n\n        entities,\n        user,\n\n        toggleFavorite,\n        fetchPopularMovies,\n        fetchTopRatedMovies,\n        fetchUpcomingMovies,\n    } = props\n\n    const [categoryName, setCategoryName] = useState(categories.POPULAR)\n    const categoryMap = {\n        [categories.POPULAR]: {\n            movies: popularMovies,\n            fetch: fetchPopularMovies\n        },\n        [categories.TOP_RATED]: {\n            movies: topRatedMovies,\n            fetch: fetchTopRatedMovies\n        },\n        [categories.UPCOMING]: {\n            movies: upcomingMovies,\n            fetch: fetchUpcomingMovies,\n        }\n    }\n    const category = categoryMap[categoryName]\n    const movies = isAppReady ? category.movies.ids.map(id => getMovie(id, entities, user)) : []\n\n    function loadMore() {\n        if(category.movies.totalMovies === category.movies.ids.length) return\n        category.fetch(category.movies.ids.length / MOVIES_PER_PAGE + 1)\n    }\n\n    function switchTab(name){\n        setCategoryName(name)\n        const newCategory = categoryMap[name]\n        if(!newCategory.movies.ids.length) newCategory.fetch()\n    }\n\n    useEffect(function () {\n        switchTab(categories.POPULAR)\n        // TODO Should I memorize the function and constants?\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    const classes = useStyles()\n\n    return (\n        <Container className={classes.container}>\n                <CustomTabs\n                    value={categoryName}\n                    onChange={(e, newValue) => switchTab(newValue)}\n                    aria-label=\"disabled tabs example\"\n                >\n                    <CustomTab label=\"Popular\" value={categories.POPULAR}/>\n                    <CustomTab label=\"Top rated\" value={categories.TOP_RATED}/>\n                    <CustomTab label=\"Upcoming\" value={categories.UPCOMING}/>\n                </CustomTabs>\n                <main className={classes.movieList}>\n                    <MovieBrowser\n                        onLoadMore={loadMore}\n                        placeholdersAmount={10}\n                        movies={movies}\n                        onFavorite={toggleFavorite}\n                        isFetched={category.movies.isFetched}\n                        isFetching={!isAppReady || category.movies.isFetching}\n                        totalMovies={category.movies.totalMovies}\n                    />\n                </main>\n        </Container>\n    )\n}\n\nfunction mapStateToProps(state) {\n    return {\n        isAppReady: state.common.isAppReady,\n\n        popularMovies: state.home.popularMovies,\n        topRatedMovies: state.home.topRatedMovies,\n        upcomingMovies: state.home.upcomingMovies,\n\n        entities: state.entities,\n        user: state.user,\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        fetchPopularMovies: (page) => dispatch(fetchPopularMovies(page)),\n        fetchTopRatedMovies: (page) => dispatch(fetchTopRatedMovies(page)),\n        fetchUpcomingMovies: (page) => dispatch(fetchUpcomingMovies(page)),\n        toggleFavorite: (id) => dispatch(toggleFavorite(id))\n    }\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home)\n"]},"metadata":{},"sourceType":"module"}